/**
 * skylark-domx-plugins-repeaters - The skylark repeater plugin library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-repeaters/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-query"],function(s,r,a){return s.Evented.inherit({klassName:"ViewBase",options:{controlsClass:"skylarkui-repeater-controls",fullScreen:!1},_construct:function(t,e){var n,i=this;this.repeater=t,this.initOptions(e),this.options.fullScreen&&r.fullScreen(this.container[0]),this.repeater.on("item.running",function(t){i.container.hasClass(i.options.controlsClass)?(n=!0,i.container.removeClass(i.options.controlsClass)):n=!1}),this.repeater.on("item.running",function(t){n&&i.container.addClass(i.options.controlsClass)})},_create$Item:function(t,e){var n,i,r,o=!1;for(;!o&&0<=t.search("{{");)r=i=n=void 0,i=t.indexOf("{{"),r=t.indexOf("}}",i+2),-1<i&&-1<r?(n=s.trim(t.substring(i+2,r)),n=void 0!==e[n]?e[n]:"",t=t.substring(0,i)+n+t.substring(r+2)):o=!0;return a(t)},initOptions:function(t){var e=this.constructor,n=e.cache=e.cache||{};if(!(r=n.defaults)){for(var i=[];i.unshift(e),e!==Plugin&&(e=e.superclass););for(var r=n.defaults={},o=0;o<i.length;o++)(e=i[o]).prototype.hasOwnProperty("options")&&s.mixin(r,e.prototype.options,!0),e.hasOwnProperty("options")&&s.mixin(r,e.options,!0)}return Object.defineProperty(this,"options",{value:s.mixin({},r,t,!0)}),this.options},selected:function(){var t=this.options.infiniteScroll;t&&this.repeater.infiniteScrolling(!0,"object"==typeof t?t:{})},close:function(){r.fullScreen()===this.container[0]&&r.fullScreen(!1)},getValue:function(){return this.getSelectedItems()},cleared:function(){},dataOptions:function(t){return t},enabled:function(t){},addItem:function(t,e){var n;e&&"none"!==(n=e.action||"append")&&void 0!==e.item&&(void 0!==e.container?a(e.container):t)[n](e.item)},render:function(t){this.before&&(e=this.before(t),this.addItem(t.container,e));var e=t.container.find('[data-container="true"]:last'),n=0<e.length?e:t.container;if(this.renderItem){var e=(this.repeat||"data.items").split("."),i=e[0];if("data"===i||"this"===i){for(var r="this"===i?this:t.data,o=e.slice(1),s=0;s<o.length;s++){if(void 0===r[o[s]]){r=[],console.warn("WARNING: Repeater unable to find property to iterate renderItem on.");break}r=r[o[s]]}for(var a=0;a<r.length;a++){var c=this.renderItem({container:n,data:t.data,index:a,subset:r});this.addItem(n,c)}}else console.warn('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"')}this.after&&(i=this.after(t),this.addItem(t.container,i))}})});
//# sourceMappingURL=../sourcemaps/views/view-base.js.map
