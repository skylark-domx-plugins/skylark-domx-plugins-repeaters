/**
 * skylark-ui-repeater - The skylark repeater widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-repeater/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","./repeater"],function(e,t,n,i,a,s){s.fn.repeater&&(s.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},s.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var e=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){e.push(s(this))}),e},s.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(e,t){var n,i,a,l,r=this.viewOptions.thumbnail_selectable,c=this;function u(){if(l===e[n].index)return i=s(this),!1;l++}function d(){(i=s(this)).is(e[n].selector)&&o(i,e[n].selected)}function o(e,n){(n=void 0===n||n)?(t||"multi"===r||c.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}for(s.isArray(e)||(e=[e]),a=!0===t||"multi"===r?e.length:r&&e.length>0?1:0,n=0;n<a;n++)void 0!==e[n].index?(i=s(),l=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(u),i.length>0&&o(i,e[n].selected)):e[n].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(d)},s.fn.repeater.defaults=e.mixin({},s.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:"no items found",thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}),s.fn.repeater.viewTypes.thumbnail={selected:function(){var e,t=this.viewOptions.thumbnail_infiniteScroll;t&&(e="object"==typeof t?t:{},this.infiniteScrolling(!0,e))},before:function(e){var t,n=this.viewOptions.thumbnail_alignment,i=this.$canvas.find(".repeater-thumbnail-cont"),a=e.data,l={};return i.length<1?(i=s('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),n&&"none"!==n?(n={center:1,justify:1,left:1,right:1}[n]?n:"justify",i.addClass("align-"+n),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,l.item=i):l.action="none",a.items&&a.items.length<1?((t=s('<div class="empty"></div>')).append(this.viewOptions.thumbnail_noItemsHTML),i.append(t)):i.find(".empty:first").remove(),l},renderItem:function(t){var n=this.viewOptions.thumbnail_selectable,i=this,a=s(function(t,n){var i=!1;function a(){var a,s,l;s=n.indexOf("{{"),a=n.indexOf("}}",s+2),s>-1&&a>-1?(l=e.trim(n.substring(s+2,a)),l=void 0!==t[l]?t[l]:"",n=n.substring(0,s)+l+n.substring(a+2)):i=!0}for(;!i&&n.search("{{")>=0;)a();return n}(t.subset[t.index],this.viewOptions.thumbnail_template));return a.data("item_data",t.data.items[t.index]),n&&(a.addClass("selectable"),a.on("click",function(){i.isDisabled||(a.hasClass("selected")?(a.removeClass("selected"),i.$element.trigger("deselected.fu.repeaterThumbnail",a)):("multi"!==n&&i.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var e=s(this);e.removeClass("selected"),i.$element.trigger("deselected.fu.repeaterThumbnail",e)}),a.addClass("selected"),i.$element.trigger("selected.fu.repeaterThumbnail",a)))})),t.container.append(a),this.thumbnail_injectSpacers&&a.after('<span class="spacer">&nbsp;</span>'),this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:t.container,item:a,itemData:t.subset[t.index]},function(){}),!1}})});
//# sourceMappingURL=sourcemaps/repeater-thumbnail.js.map
