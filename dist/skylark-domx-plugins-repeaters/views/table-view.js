/**
 * skylark-domx-plugins-repeaters - The skylark repeater plugin library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-repeaters/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","../views","./view-base"],function(t,e,s,i,a,n,o,r){var l=r.inherit({klassName:"TableView",options:{columnRendered:null,columnSizing:!0,columnSyncing:!0,highlightSortedColumn:!0,infiniteScroll:!1,noItemsHTML:"no items found",selectable:!1,sortClearing:!1,rowRendered:null,frozenColumns:0,actions:!1,viewClass:"repeater-table",tableWrapperClass:"repeater-table-wrapper",checkClass:"repeater-table-check",headingClass:"repeater-table-heading",actionsPlaceHolderClass:"repeater-table-actions-placeholder"},clearSelectedItems:function(){this.repeater.$canvas.find(`.${this.options.checkClass}`).remove(),this.repeater.$canvas.find(`.${this.options.viewClass} table tbody tr.selected`).removeClass("selected")},highlightColumn:function(t,e){var s=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table tbody`);(this.options.highlightSortedColumn||e)&&(s.find("td.sorted").removeClass("sorted"),s.find("tr").each(function(){n(this).find("td:nth-child("+(t+1)+")").filter(function(){return!n(this).parent().hasClass("empty")}).addClass("sorted")}))},getSelectedItems:function(){var t=[];return this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr.selected`).each(function(){var e=n(this);t.push({data:e.data("item_data"),element:e})}),t},positionHeadings:function(){var t=this.repeater.$element.find(`.${this.options.tableWrapperClass}`),e=t.offset().left;t.scrollLeft()>0?t.find(`.${this.options.headingClass}`).each(function(){var t=n(this),s=t.parents("th:first").offset().left-e+"px";t.addClass("shifted").css("left",s)}):t.find(`.${this.options.headingClass}`).each(function(){n(this).removeClass("shifted").css("left","")})},setSelectedItems:function(t,e){var s,i,a,o=this.options.selectable,r=this,l=t;n.isArray(l)||(l=[l]);var d=function(t){i=n(this),(i.data("item_data")||{})[l[s].property]===l[s].value&&c(i,l[s].selected,t)},c=function(t,s,i){var a;void 0===s||s?(e||"multi"===o||r.clearSelectedItems(),t.hasClass("selected")||(t.addClass("selected"),(r.options.frozenColumns||"multi"===r.options.selectable)&&((a=r.repeater.$element.find(".frozen-column-wrapper tr:nth-child("+(i+1)+")")).addClass("selected"),a.find(".repeater-select-checkbox").addClass("checked")),r.options.actions&&r.repeater.$element.find(".actions-column-wrapper tr:nth-child("+(i+1)+")").addClass("selected"),t.find("td:first").prepend(`<div class="${this.options.checkClass}"><span class="glyphicon glyphicon-ok"></span></div>`))):(r.options.frozenColumns&&((a=r.repeater.$element.find(".frozen-column-wrapper tr:nth-child("+(i+1)+")")).addClass("selected"),a.find(".repeater-select-checkbox").removeClass("checked")),r.options.actions&&r.repeater.$element.find(".actions-column-wrapper tr:nth-child("+(i+1)+")").removeClass("selected"),t.find(`.${this.options.checkClass}`).remove(),t.removeClass("selected"))};for(a=!0===e||"multi"===o?l.length:o&&l.length>0?1:0,s=0;s<a;s++)void 0!==l[s].index?(i=this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr:nth-child(`+(l[s].index+1)+")")).length>0&&c(i,l[s].selected,l[s].index):void 0!==l[s].property&&void 0!==l[s].value&&this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr`).each(d)},sizeHeadings:function(){var t=this;this.repeater.$element.find(`.${this.options.viewClass} table`).find("thead th").each(function(){var e=n(this),s=e.find(`.${t.options.headingClass}`);s.css({height:e.outerHeight()}),s.outerWidth(s.data("forced-width")||e.outerWidth())})},setFrozenColumns:function(){var t=this.repeater.$canvas.find(".table-frozen"),e=this.repeater.$element.find(".repeater-canvas"),s=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`),i=this.repeater.$element.find(`.${this.options.viewClass}`),a=this.options.frozenColumns,o=this;if("multi"===this.options.selectable&&(a+=1,e.addClass("multi-select-enabled")),t.length<1){var r=n('<div class="frozen-column-wrapper"></div>').insertBefore(s),l=s.clone().addClass("table-frozen");l.find("th:not(:lt("+a+"))").remove(),l.find("td:not(:nth-child(n+0):nth-child(-n+"+a+"))").remove();var d=l.clone().removeClass("table-frozen");d.find("tbody").remove();var c=n('<div class="frozen-thead-wrapper"></div>').append(d),h=c.find("th label.checkbox-custom.checkbox-inline");h.attr("id",h.attr("id")+"_cloned"),r.append(l),i.append(c),this.repeater.$canvas.addClass("frozen-enabled")}this.sizeFrozenColumns(),n(`.frozen-thead-wrapper .${this.options.headingClass}`).on("click",function(){var t=n(this).parent("th").index();t+=1,o.repeater.$element.find(`.${this.options.tableWrapperClass} > table thead th:nth-child(`+t+`) .${this.options.headingClass}`)[0].click()})},positionColumns:function(){var t=this.repeater.$element.find(".repeater-canvas"),e=t.scrollTop(),s=t.scrollLeft(),i=this.options.frozenColumns||"multi"===this.options.selectable,a=this.options.actions,n=this.repeater.$element.find(".repeater-canvas").outerWidth(),o=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`).outerWidth()-(n-(this.repeater.$element.find(".table-actions")?this.repeater.$element.find(".table-actions").outerWidth():0))>=s;e>0?t.find(`.${this.options.headingClass}`).css("top",e):t.find(`.${this.options.headingClass}`).css("top","0"),s>0?(i&&(t.find(".frozen-thead-wrapper").css("left",s),t.find(".frozen-column-wrapper").css("left",s)),a&&o&&(t.find(".actions-thead-wrapper").css("right",-s),t.find(".actions-column-wrapper").css("right",-s))):(i&&(t.find(".frozen-thead-wrapper").css("left","0"),t.find(".frozen-column-wrapper").css("left","0")),a&&(t.find(".actions-thead-wrapper").css("right","0"),t.find(".actions-column-wrapper").css("right","0")))},createItemActions:function(){var e,s="",i=this,a=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`),o=this.repeater.$canvas.find(".table-actions"),r=this.options.actions.items.length;if(1==r){var l=this.options.actions.items[0];if(s='<a href="javascript:void(0)" data-action="'+l.name+'" class="action-item"> '+l.html+"</a>",o.length<1){var d=n('<div class="actions-column-wrapper" style="width: '+this.options.actions.width+'px"></div>').insertBefore(a);(p=a.clone().addClass("table-actions")).find("th:not(:last-child)").remove(),p.find("tr td:not(:last-child)").remove(),p.find("td").each(function(e){var a=n(this).parent().attr("id"),o=n("#"+a).data("item_data");i.options.exceptActionRows&&o&&t.inArray(i.options.exceptActionRows,o.name)?n(this).html("-"):n(this).html(s),n(this).find("a").attr("data-row",e+1)})}}else{for(e=0;e<r;e++){var c=(l=this.options.actions.items[e]).html;s+='<li class="'+l.name+'"><a href="javascript:void(0)" data-action="'+l.name+'" class="action-item"> '+c+"</a></li>"}var h='<ul class="ul-inline list-unstyled ul-horizontally" role="menu">'+s+"</ul>";if(o.length<1){var p;d=n('<div class="actions-column-wrapper" style="width: '+this.options.actions.width+'px"></div>').insertBefore(a);if((p=a.clone().addClass("table-actions")).find("th:not(:last-child)").remove(),p.find("tr td:not(:last-child)").remove(),"multi"===this.options.selectable||"action"===this.options.selectable)p.find("thead tr").html('<th><div class="repeater-list-heading">'+h+"</div></th>"),"action"!==this.options.selectable&&p.find("thead .btn").attr("disabled","disabled");else{var f=this.options.actions.label||'<span class="actions-hidden">a</span>';p.find("thead tr").addClass("empty-heading").html("<th>"+f+'<div class="repeater-list-heading">'+f+"</div></th>")}p.find("td").each(function(t){n(this).html(h).addClass("r-list-action"),n(this).find("a").attr("data-row",t+1)})}}d.append(p),this.repeater.$canvas.addClass("actions-enabled"),this.sizeActionsTable(),this.repeater.$element.find(".table-actions tbody .action-item").on("click",function(t){if(!i.isDisabled){var e={actionName:n(this).data("action"),rows:[n(this).data("row")]};i.getActionItems(e,t)}}),this.repeater.$element.find(".table-actions thead .action-item").on("click",function(t){if(!i.isDisabled){var e={actionName:n(this).data("action"),rows:[]},s=`.${this.options.tableWrapperClass} > table .selected`;"action"===i.options.selectable&&(s=`.${this.options.tableWrapperClass} > table tr`),i.repeater.$element.find(s).each(function(t){e.rows.push(t+1)}),i.getActionItems(e,t)}})},createItemActions_1:function(){var t,e,s="",i=this,a=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`),o=this.repeater.$canvas.find(".table-actions");for(t=0,e=this.options.actions.items.length;t<e;t++){var r=this.options.actions.items[t],l=r.html;s+='<li><a href="#" data-action="'+r.name+'" class="action-item"> '+l+"</a></li>"}var d='<div class="btn-group"><button type="button" class="btn btn-xs btn-default dropdown-toggle repeater-actions-button" data-toggle="dropdown" data-flip="auto" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu">'+s+"</ul></div>";if(o.length<1){var c=n('<div class="actions-column-wrapper" style="width: '+this.actions_width+'px"></div>').insertBefore(a),h=a.clone().addClass("table-actions");if(h.find("th:not(:last-child)").remove(),h.find("tr td:not(:last-child)").remove(),"multi"===this.options.selectable||"action"===this.options.selectable)h.find("thead tr").html(`<th><div class="${this.options.headingClass}">`+d+"</div></th>"),"action"!==this.options.selectable&&h.find("thead .btn").attr("disabled","disabled");else{var p=this.options.actions.label||'<span class="actions-hidden">a</span>';h.find("thead tr").addClass("empty-heading").html("<th>"+p+`<div class="${this.options.headingClass}">`+p+"</div></th>")}h.find("td").each(function(t){n(this).html(d),n(this).find("a").attr("data-row",t+1)}),c.append(h),this.repeater.$canvas.addClass("actions-enabled")}this.sizeActionsTable(),this.repeater.$element.find(".table-actions tbody .action-item").on("click",function(t){if(!i.isDisabled){var e={actionName:n(this).data("action"),rows:[n(this).data("row")]};i.getActionItems(e,t)}}),this.repeater.$element.find(".table-actions thead .action-item").on("click",function(t){if(!i.isDisabled){var e={actionName:n(this).data("action"),rows:[]},s=`.${this.options.tableWrapperClass} > table .selected`;"action"===i.options.selectable&&(s=`.${this.options.tableWrapperClass} > table tr`),i.repeater.$element.find(s).each(function(t){e.rows.push(t+1)}),i.getActionItems(e,t)}})},getActionItems:function(t,e){for(var s=[],i=n.grep(this.options.actions.items,function(e){return e.name===t.actionName})[0],a=0,o=t.rows.length;a<o;a++){var r=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table tbody tr:nth-child(`+t.rows[a]+")");s.push({item:r,rowData:r.data("item_data")})}if(1===s.length&&(s=s[0]),i.clickAction){i.clickAction(s,function(){},e)}},sizeActionsTable:function(){var t=this.repeater.$element.find(`.${this.options.viewClass} table.table-actions`),e=t.find("thead tr th"),s=this.repeater.$element.find(`.${this.options.tableWrapperClass} > table`);e.outerHeight(s.find("thead tr th").outerHeight()),e.find(`.${this.options.headingClass}`).outerHeight(e.outerHeight()),t.find("tbody tr td:first-child").each(function(t){n(this).outerHeight(s.find("tbody tr:eq("+t+") td").outerHeight())})},sizeFrozenColumns:function(){var t=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`);this.repeater.$element.find(`.${this.options.viewClass} table.table-frozen tr`).each(function(e){n(this).height(t.find("tr:eq("+e+")").height())});var e=t.find("td:eq(0)").outerWidth();this.repeater.$element.find(".frozen-column-wrapper, .frozen-thead-wrapper").width(e)},frozenOptionsInitialize:function(){var t=this.repeater.$element.find(".frozen-column-wrapper .checkbox-inline"),e=this.repeater.$element.find(".header-checkbox .checkbox-custom"),s=this.repeater.$element.find(`.${this.options.viewClass} table`),i=this;this.repeater.$element.find("tr.selectable").on("mouseover mouseleave",function(t){var e=n(this).index();e+=1,"mouseover"===t.type?s.find("tbody tr:nth-child("+e+")").addClass("hovered"):s.find("tbody tr:nth-child("+e+")").removeClass("hovered")}),e.checkbox(),t.checkbox();var a=this.repeater.$element.find(".table-frozen tbody .checkbox-inline"),o=this.repeater.$element.find(".frozen-thead-wrapper thead .checkbox-inline input");function r(t){i.revertingCheckbox=!0,t.checkbox("toggle"),delete i.revertingCheckbox}a.on("change",function(t){if(t.preventDefault(),!i.revertingCheckbox)if(i.isDisabled)r(n(t.currentTarget));else{var e=n(this).attr("data-row");e=parseInt(e,10)+1,i.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr:nth-child(`+e+")").click();var s=i.repeater.$element.find(".table-frozen tbody .checkbox-inline.checked").length;0===s?(o.prop("checked",!1),o.prop("indeterminate",!1)):s===a.length?(o.prop("checked",!0),o.prop("indeterminate",!1)):(o.prop("checked",!1),o.prop("indeterminate",!0))}}),o.on("change",function(e){i.revertingCheckbox||(i.isDisabled?r(n(e.currentTarget)):n(this).is(":checked")?(i.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr:not(.selected)`).click(),i.repeater.$element.trigger("selected.lark.repeaterList",t)):(i.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr.selected`).click(),i.repeater.$element.trigger("deselected.lark.repeaterList",t)))})},cleared:function(){this.options.columnSyncing&&this.sizeHeadings()},dataOptions:function(t){return this.sortDirection&&(t.sortDirection=this.sortDirection),this.sortProperty&&(t.sortProperty=this.sortProperty),t},enabled:function(t){this.options.actions&&(t.status?(this.repeater.$canvas.find(".repeater-actions-button").removeAttr("disabled"),b.call(this)):this.repeater.$canvas.find(".repeater-actions-button").attr("disabled","disabled"))},initialize:function(t,e){this.sortDirection=null,this.sortProperty=null,this.specialBrowserClass=u(),this.actions_width=void 0!==this.options.actions.width?this.options.actions.width:37,this.noItems=!1,e()},resize:function(){m.call(this,this.repeater.$element.find(`.${this.options.tableWrapperClass} > table thead tr`)),this.options.actions&&this.sizeActionsTable(),(this.options.frozenColumns||"multi"===this.options.selectable)&&this.sizeFrozenColumns(),this.options.columnSyncing&&this.sizeHeadings()},selected:function(){var t,e=this.options.infiniteScroll;this.firstRender=!0,this.repeater.$loader.addClass("noHeader"),e&&(t="object"==typeof e?e:{},this.repeater.infiniteScrolling(!0,t))},before:function(t){var e,s=t.container.find(`.${this.options.viewClass}`),i=this;return t.data.count>0?this.noItems=!1:this.noItems=!0,s.length<1&&((s=n(`<div class="${this.options.viewClass} `+this.specialBrowserClass+`" data-preserve="shallow"><div class="${this.options.tableWrapperClass}" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"></table></div></div>`)).find(`.${this.options.tableWrapperClass}`).on("scroll.lark.repeaterList",function(){i.options.columnSyncing&&i.positionHeadings()}),(i.options.frozenColumns||i.options.actions||"multi"===i.options.selectable)&&t.container.on("scroll.lark.repeaterList",function(){i.positionColumns()}),t.container.append(s)),t.container.removeClass("actions-enabled actions-enabled multi-select-enabled"),e=s.find("table"),f.call(this,e,t.data),p.call(this,e,t.data),!1},renderItem:function(t){return h.call(this,t.container,t.subset,t.index),!1},after:function(){var t;return!this.options.frozenColumns&&"multi"!==this.options.selectable||this.noItems||this.setFrozenColumns(),this.options.actions&&!this.noItems&&(this.createItemActions(),this.sizeActionsTable()),!this.options.frozenColumns&&!this.options.actions&&"multi"!==this.options.selectable||this.noItems||(this.positionColumns(),this.frozenOptionsInitialize()),this.options.columnSyncing&&(this.sizeHeadings(),this.positionHeadings()),(t=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table .${this.options.headingClass}.sorted`)).length>0&&this.highlightColumn(t.data("fu_item_index")),!1}}),d=function(t,e,s,i,a){var o=i[a].className,r=e[s][i[a].property],l=n("<td></td>"),d=i[a]._auto_width,c=i[a].property;if(!1!==this.options.actions&&"@_ACTIONS_@"===c&&(r=`<div class="${this.options.actionsPlaceHolderClass}" style="width: `+this.actions_width+'px"></div>'),r=void 0!==r?r:"",l.addClass(void 0!==o?o:"").append(r),void 0!==d&&l.outerWidth(d),t.append(l),"multi"===this.options.selectable&&"@_CHECKBOX_@"===i[a].property){var h='<label data-row="'+s+'" class="checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox"><input class="sr-only" type="checkbox"></label>';l.html(h)}return l},c=function(t,e,s){var i,a,o,r,l,d="glyphicon-chevron-down",c="glyphicon-chevron-up",h=n(`<div class="${this.options.headingClass}"><span class="glyphicon rlc"></span></div>`),p=(this.repeater.$element.attr("id")+"_"||"")+"checkall",f=`<div class="${this.options.headingClass} header-checkbox">`+'<label id="'+p+'" class="checkbox-custom checkbox-inline"><input class="sr-only" type="checkbox" value=""><span class="checkbox-label">&nbsp;</span></label></div>',m=n("<th></th>"),u=this;if(h.data("fu_item_index",s),h.prepend(e[s].label),m.html(h.html()).find("[id]").removeAttr("id"),"@_CHECKBOX_@"!==e[s].property?m.append(h):m.append(f),i=m.add(h),r=h.find(".glyphicon.rlc:first"),l=r.add(m.find(".glyphicon.rlc:first")),this.options.actions&&"@_ACTIONS_@"===e[s].property){var b=this.actions_width;m.css("width",b),h.css("width",b)}void 0!==(a=e[s].className)&&i.addClass(a),(o=e[s].sortable)&&(i.addClass("sortable"),h.on("click.lark.repeaterList",function(){u.isDisabled||(u.sortProperty="string"==typeof o?o:e[s].property,h.hasClass("sorted")?r.hasClass(c)?(l.removeClass(c).addClass(d),u.sortDirection="desc"):u.options.sortClearing?(i.removeClass("sorted"),l.removeClass(d),u.sortDirection=null,u.sortProperty=null):(l.removeClass(d).addClass(c),u.sortDirection="asc"):(t.find(`th, .${this.options.headingClass}`).removeClass("sorted"),l.removeClass(d).addClass(c),u.sortDirection="asc",i.addClass("sorted")),u.repeater.render({clearInfinite:!0,pageIncrement:null}))})),"asc"!==e[s].sortDirection&&"desc"!==e[s].sortDirection||(t.find(`th, .${this.options.headingClass}`).removeClass("sorted"),i.addClass("sortable sorted"),"asc"===e[s].sortDirection?(l.addClass(c),this.sortDirection="asc"):(l.addClass(d),this.sortDirection="desc"),this.sortProperty="string"==typeof o?o:e[s].property),t.append(m)},h=function(t,e,s){var i=n("<tr></tr>");if(this.options.selectable&&(i.data("item_data",e[s]),"action"!==this.options.selectable)){i.addClass("selectable"),i.attr("tabindex",0);var a=this;i.on("click.lark.repeaterList",function(){(function(t){var e="multi"===t.options.selectable,s=t.options.actions,i=t.$element;if(!t.isDisabled){var a=n(this),o=n(this).index()+1,r=i.find(".frozen-column-wrapper tr:nth-child("+o+")"),l=i.find(".actions-column-wrapper tr:nth-child("+o+")"),d=i.find(".frozen-column-wrapper tr:nth-child("+o+") .checkbox-inline");a.is(".selected")?(a.removeClass("selected"),e?(d.click(),r.removeClass("selected"),s&&l.removeClass("selected")):a.find(`.${this.options.checkClass}`).remove(),i.trigger("deselected.lark.repeaterList",a)):(e?(d.click(),a.addClass("selected"),r.addClass("selected"),s&&l.addClass("selected")):(t.$canvas.find(`.${this.options.checkClass}`).remove(),t.$canvas.find(`.${this.options.viewClass} tbody tr.selected`).each(function(){n(this).removeClass("selected"),i.trigger("deselected.lark.repeaterList",n(this))}),a.find("td:first").prepend(`<div class="${this.options.checkClass}"><span class="glyphicon glyphicon-ok"></span></div>`),a.addClass("selected"),r.addClass("selected")),i.trigger("selected.lark.repeaterList",a)),b.call(t)}}).call(this,a)}),i.keyup(function(t){13===t.keyCode&&i.trigger("click.lark.repeaterList")})}this.options.actions&&!this.options.selectable&&i.data("item_data",e[s]);for(var o=[],r=0,l=this.columns.length;r<l;r++)o.push(d.call(this,i,e,s,this.columns,r));if(t.append(i),this.options.columnRendered)for(var c=0,h=o.length;c<h;c++)"@_CHECKBOX_@"!==this.columns[c].property&&"@_ACTIONS_@"!==this.columns[c].property&&this.options.columnRendered({container:i,columnAttr:this.columns[c].property,item:o[c],rowData:e[s]},function(){});this.options.rowRendered&&this.options.rowRendered({container:t,item:i,rowData:e[s]},function(){})},p=function(t,e){var s,i=t.find("tbody");i.length<1&&(i=n('<tbody data-container="true"></tbody>'),t.append(i)),"string"==typeof e.error&&e.error.length>0?((s=n('<tr class="empty text-danger"><td colspan="'+this.columns.length+'"></td></tr>')).find("td").append(e.error),i.append(s)):e.items&&e.items.length<1&&((s=n('<tr class="empty"><td colspan="'+this.columns.length+'"></td></tr>')).find("td").append(this.options.noItemsHTML),i.append(s))},f=function(t,e){var s,i,a,o=e.columns||[],r=t.find("thead");if(this.firstRender||function(t,e){if(!e)return!1;if(!t||e.length!==t.length)return!0;for(var s=0,i=e.length;s<i;s++){if(!t[s])return!0;for(var a in e[s])if(e[s].hasOwnProperty(a)&&t[s][a]!==e[s][a])return!0}return!1}(this.columns,o)||0===r.length){if(r.remove(),"multi"===this.options.selectable&&!this.noItems){o.splice(0,0,{label:"c",property:"@_CHECKBOX_@",sortable:!1})}if(this.columns=o,this.firstRender=!1,this.repeater.$loader.removeClass("noHeader"),this.options.actions){var l={label:this.options.actions.label||'<span class="actions-hidden">a</span>',property:"@_ACTIONS_@",sortable:!1,width:this.actions_width};o.push(l)}for(a=(r=n('<thead data-preserve="deep"><tr></tr></thead>')).find("tr"),s=0,i=o.length;s<i;s++)c.call(this,a,o,s);if(t.prepend(r),"multi"===this.options.selectable&&!this.noItems){var d=this.repeater.$element.find(`.${this.options.tableWrapperClass} .header-checkbox`).outerWidth();n.grep(o,function(t){return"@_CHECKBOX_@"===t.property})[0].width=d}m.call(this,a)}},m=function(t){var e,s,i,a,o=[],r=this;if(this.options.columnSizing&&(e=0,a=0,t.find("th").each(function(){var t,s=n(this);if(void 0!==r.columns[e].width)t=r.columns[e].width,s.outerWidth(t),a+=s.outerWidth(),r.columns[e]._auto_width=t;else{var i=s.find(`.${r.options.headingClass}`).outerWidth();o.push({col:s,index:e,minWidth:i})}e++}),(s=o.length)>0)){var l=this.repeater.$canvas.find(`.${this.options.tableWrapperClass}`).outerWidth();for(i=Math.floor((l-a)/s),e=0;e<s;e++)o[e].minWidth>i&&(i=o[e].minWidth),o[e].col.outerWidth(i),this.columns[o[e].index]._auto_width=i}},u=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE "),s=t.indexOf("Firefox");return e>0?"ie-"+parseInt(t.substring(e+5,t.indexOf(".",e)),10):s>0?"firefox":""},b=function(){var t=`.${this.options.tableWrapperClass} > table .selected`,e=this.repeater.$element.find(".table-actions");"action"===this.options.selectable&&(t=`.${this.options.tableWrapperClass} > table tr`),this.repeater.$canvas.find(t).length>0?e.find("thead .btn").removeAttr("disabled"):e.find("thead .btn").attr("disabled","disabled")};return o.table={name:"table",ctor:l},l});
//# sourceMappingURL=../sourcemaps/views/table-view.js.map
