/**
 * skylark-widgets-repeater - The skylark repeater widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-repeater/
 * @license MIT
 */
!function(e,t){var i=t.define,require=t.require,s="function"==typeof i&&i.amd,n=!s&&"undefined"!=typeof exports;if(!s&&!i){var a={};i=t.define=function(e,t,i){"function"==typeof i?(a[e]={factory:i,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var i=t.split("/"),s=e.split("/");i.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?i.pop():i.push(s[n]));return i.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):a[e]={factory:null,resolved:!0,exports:i}},require=t.require=function(e){if(!a.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=a[e];if(!module.resolved){var i=[];module.deps.forEach(function(e){i.push(require(e))}),module.exports=module.factory.apply(t,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-widgets-repeater/ComboBox",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-popups/Dropdown","skylark-widgets-base/Widget"],function(e,t,i,s,n,a,o,r){var l=r.inherit({klassName:"ComboBox",pluginName:"lark.combobox",widgetClass:"lark-combobox",options:{autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function(e,t,i){var s=0;i.$dropMenu.find(".empty-indicator").remove(),e.each(function(e){var i=a(this),n=a(this).text().trim();i.removeClass(),n===t?(i.addClass("text-success"),s++):n.substr(0,t.length)===t?(i.addClass("text-info"),s++):i.addClass("hidden")}),0===s&&i.$dropMenu.append('<li class="empty-indicator text-muted"><em>No Matches</em></li>')}},_init:function(){this.$element=a(this._elm),this.$dropMenu=this.$element.find(".dropdown-menu"),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.$button.plugin("domx.dropdown"),this.$inputGroupBtn=this.$element.find(".input-group-btn"),this.$element.on("click.lark","a",e.proxy(this.itemclicked,this)),this.$element.on("change.lark","input",e.proxy(this.inputchanged,this)),this.$element.on("shown.bs.dropdown",e.proxy(this.menuShown,this)),this.$input.on("keyup.lark",e.proxy(this.keypress,this)),this.setDefaultSelection();var t=this.$dropMenu.children("li");0===t.length&&this.$button.addClass("disabled"),this.options.filterOnKeypress&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this)},_destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){a(this).attr("value",a(this).val())}),this.$element[0].outerHTML},doSelect:function(e){void 0!==e[0]?(this.$element.find("li.selected:first").removeClass("selected"),this.$selectedItem=e,this.$selectedItem.addClass("selected"),this.$input.val(this.$selectedItem.text().trim())):(this.$selectedItem=null,this.$element.find("li.selected:first").removeClass("selected"))},clearSelection:function(){this.$selectedItem=null,this.$input.val(""),this.$dropMenu.find("li").removeClass("selected")},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var e=this.$element.outerWidth();this.$dropMenu.outerWidth(e)},selectedItem:function(){var t=this.$selectedItem,i={};if(t){var s=this.$selectedItem.text().trim();i=e.mixin({text:s},this.$selectedItem.data())}else i={text:this.$input.val().trim(),notFound:!0};return i},selectByText:function(e){var t=a([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||a(this).text()||"").trim().toLowerCase()===(e||"").trim().toLowerCase())return t=a(this),!1}),this.doSelect(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);t.length>0&&(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(e){this.$selectedItem=a(e.target).parent(),this.$input.val(this.$selectedItem.text().trim()).trigger("change",{synthetic:!0});var t=this.selectedItem();this.$element.trigger("changed.lark",t),e.preventDefault(),this.$element.find(".dropdown-toggle").focus()},keypress:function(e){var t=38===e.which||40===e.which||37===e.which||39===e.which;if(this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass("open")&&(this.$button.plugin("domx.dropdown").toggle(),this.$input.focus()),13===e.which){e.preventDefault();var i=this.$dropMenu.find("li.selected").text().trim();i.length>0?this.selectByText(i):this.selectByText(this.$input.val()),this.$inputGroupBtn.removeClass("open")}else if(27===e.which)e.preventDefault(),this.clearSelection(),this.$inputGroupBtn.removeClass("open");else if(this.options.showOptionsOnKeypress&&(40===e.which||38===e.which)){e.preventDefault();var s=this.$dropMenu.find("li.selected");s.length>0&&(s=40===e.which?s.next(":not(.hidden)"):s.prev(":not(.hidden)")),0===s.length&&(s=40===e.which?this.$dropMenu.find("li:not(.hidden):first"):this.$dropMenu.find("li:not(.hidden):last")),this.doSelect(s)}this.options.filterOnKeypress&&!t&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this),this.previousKeyPress=e.which},inputchanged:function(e,t){var i=a(e.target).val();if(t&&t.synthetic)this.selectByText(i);else{this.selectByText(i);var s=this.selectedItem();0===s.text.length&&(s={text:i}),this.$element.trigger("changed.lark",s)}}});return l.prototype.getValue=l.prototype.selectedItem,l}),e("skylark-widgets-repeater/SearchBox",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins"],function(e,t,i,s,n,a,o){var r=o.Plugin.inherit({klassName:"SearchBox",pluginName:"lark.searchbox",options:{clearOnEmpty:!1,searchOnKeyPress:!1,allowCancel:!1},_construct:function(t,i){this.overrided(t,i),this.$element=a(this._elm),this.$repeater=this.$element.closest(".repeater"),"true"===this.$element.attr("data-searchOnKeyPress")&&(this.options.searchOnKeyPress=!0),this.$button=this.$element.find("button"),this.$input=this.$element.find("input"),this.$icon=this.$element.find(".glyphicon, .fuelux-icon"),this.$button.on("click.fu.search",e.proxy(this.buttonclicked,this)),this.$input.on("keyup.fu.search",e.proxy(this.keypress,this)),this.$repeater.length>0&&this.$repeater.on("rendered.fu.repeater",e.proxy(this.clearPending,this)),this.activeSearch=""},_destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){a(this).attr("value",a(this).val())}),this.$element[0].outerHTML},search:function(e){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-search").addClass("glyphicon-remove"),this.$icon.hasClass("fuelux-icon")&&this.$icon.removeClass("fuelux-icon-search").addClass("fuelux-icon-remove"),this.activeSearch=e,this.$element.addClass("searched pending"),this.$element.trigger("searched.fu.search",e)},clear:function(){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-remove").addClass("glyphicon-search"),this.$icon.hasClass("fuelux-icon")&&this.$icon.removeClass("fuelux-icon-remove").addClass("fuelux-icon-search"),this.$element.hasClass("pending")&&this.$element.trigger("canceled.fu.search"),this.activeSearch="",this.$input.val(""),this.$element.trigger("cleared.fu.search"),this.$element.removeClass("searched pending")},clearPending:function(){this.$element.removeClass("pending")},action:function(){var e=this.$input.val();e&&e.length>0?this.search(e):this.clear()},buttonclicked:function(e){e.preventDefault(),a(e.currentTarget).is(".disabled, :disabled")||(this.$element.hasClass("pending")||this.$element.hasClass("searched")?this.clear():this.action())},keypress:function(e){13===e.which?(e.preventDefault(),this.action()):9===e.which?e.preventDefault():27===e.which?(e.preventDefault(),this.clear()):this.options.searchOnKeyPress&&this.action()},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled","disabled"),this.options.allowCancel||this.$button.addClass("disabled")},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")}});return o.register(r),r}),e("skylark-widgets-repeater/Repeater",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-velm","skylark-domx-query","skylark-domx-popups/SelectList","skylark-widgets-base/Widget","./ComboBox","./SearchBox"],function(e,t,i,s,n,a,o,r,l,h){var d=h.inherit({klassName:"Repeater",pluginName:"lark.repeater",options:{dataSource:function(e,t){t({count:0,end:0,items:[],page:0,pages:1,start:0})},defaultView:-1,dropPagingCap:10,staticHeight:-1,views:null,searchOnKeyPress:!1,allowCancel:!0,addons:{views:["table","tile"]}},_init:function(){var e,i,s=this;this.$element=r(this._elm),this.$canvas=this.$element.find(".repeater-canvas"),this.$count=this.$element.find(".repeater-count"),this.$end=this.$element.find(".repeater-end"),this.$filters=this.$element.find(".repeater-filters"),this.$loader=this.$element.find(".repeater-loader"),this.$pageSize=this.$element.find(".repeater-itemization .selectlist"),this.$nextBtn=this.$element.find(".repeater-next"),this.$pages=this.$element.find(".repeater-pages"),this.$prevBtn=this.$element.find(".repeater-prev"),this.$primaryPaging=this.$element.find(".repeater-primaryPaging"),this.$search=this.$element.find(".repeater-search").find(".search"),this.$secondaryPaging=this.$element.find(".repeater-secondaryPaging"),this.$start=this.$element.find(".repeater-start"),this.$viewport=this.$element.find(".repeater-viewport"),this.$views=this.$element.find(".repeater-views"),this.$element.on("mousedown.bs.dropdown.data-api",'[data-toggle="dropdown"]',function(e){r(this).plugin("domx.dropdown")}),this.currentPage=0,this.currentView=null,this.isDisabled=!1,this.infiniteScrollingCallback=function(){},this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},this.lastPageInput=0,this.pageIncrement=0,this.resizeTimeout={},this.stamp=(new Date).getTime()+(Math.floor(100*Math.random())+1),this.storedDataSourceOpts=null,this.syncingViewButtonState=!1,this.viewType=null,this.$filters.plugin("domx.selectlist"),this.$pageSize.plugin("domx.selectlist"),this.$primaryPaging.find(".combobox").plugin("lark.combobox"),this.$search.plugin("lark.searchbox",{searchOnKeyPress:this.options.searchOnKeyPress,allowCancel:this.options.allowCancel}),this.$filters.on("changed.fu.selectlist",function(e,t){s.$element.trigger("filtered.lark.repeater",t),s.render({clearInfinite:!0,pageIncrement:null})}),this.$nextBtn.on("click.lark.repeater",t.proxy(this.next,this)),this.$pageSize.on("changed.fu.selectlist",function(e,t){s.$element.trigger("pageSizeChanged.lark.repeater",t),s.render({pageIncrement:null})}),this.$prevBtn.on("click.lark.repeater",t.proxy(this.previous,this)),this.$primaryPaging.find(".combobox").on("changed.fu.combobox",function(e,t){s.pageInputChange(t.text,t)}),this.$search.on("searched.fu.search cleared.fu.search",function(e,t){s.$element.trigger("searchChanged.lark.repeater",t),s.render({clearInfinite:!0,pageIncrement:null})}),this.$search.on("canceled.fu.search",function(e,t){s.$element.trigger("canceled.lark.repeater",t),s.render({clearInfinite:!0,pageIncrement:null})}),this.$secondaryPaging.on("blur.lark.repeater",function(){s.pageInputChange(s.$secondaryPaging.val())}),this.$secondaryPaging.on("keyup",function(e){13===e.keyCode&&s.pageInputChange(s.$secondaryPaging.val())}),this.$views.find("input").on("change.lark.repeater",t.proxy(this.viewChanged,this)),r(window).on("resize.lark.repeater."+this.stamp,function(){clearTimeout(s.resizeTimeout),s.resizeTimeout=setTimeout(function(){s.resize(),s.$element.trigger("resized.lark.repeater")},75)}),-1!==this.options.defaultView?i=this.options.defaultView:(e=this.$views.find("label.active input"),i=e.length>0?e.val():"table"),this.initViewTypes(function(){s.resize(),s.$element.trigger("resized.lark.repeater"),s.render({changeView:i})})},clear:function(e){var t=e||{};t.preserve?this.infiniteScrollingEnabled&&!t.clearInfinite||p(this.$canvas):this.$canvas.empty();void 0!==t.viewChanged&&t.viewChanged;this._view&&this._view.cleared({options:t})},clearPreservedDataSourceOptions:function(){this.storedDataSourceOpts=null},destroy:function(){var e;return this.$element.find("input").each(function(){r(this).attr("value",r(this).val())}),this.$canvas.empty(),e=this.$element[0].outerHTML,this.$element.find(".combobox").plugin("lark.combobox").destroy(),this.$element.find(".selectlist").plugin("domx.selectlist").destroy(),this.$element.find(".search").plugin("lark.searchbox").destroy(),this.infiniteScrollingEnabled&&r(this.infiniteScrollingCont).infinitescroll("destroy"),this.$element.remove(),r(window).off("resize.lark.repeater."+this.stamp),e},disable:function(){this.$search.plugin("lark.searchbox").disable(),this.$filters.plugin("domx.selectlist").disable(),this.$views.find("label, input").addClass("disabled").attr("disabled","disabled"),this.$pageSize.plugin("domx.selectlist").disable(),this.$primaryPaging.find(".combobox").plugin("lark.combobox").disable(),this.$secondaryPaging.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.$nextBtn.attr("disabled","disabled"),this._view&&this._view.enabled({status:!1}),this.isDisabled=!0,this.$element.addClass("disabled"),this.$element.trigger("disabled.lark.repeater")},enable:function(){this.$search.plugin("lark.searchbox").enable(),this.$filters.plugin("domx.selectlist").enable(),this.$views.find("label, input").removeClass("disabled").removeAttr("disabled"),this.$pageSize.plugin("domx.selectlist").enable(),this.$primaryPaging.find(".combobox").plugin("lark.combobox").enable(),this.$secondaryPaging.removeAttr("disabled"),this.$prevBtn.hasClass("page-end")||this.$prevBtn.removeAttr("disabled"),this.$nextBtn.hasClass("page-end")||this.$nextBtn.removeAttr("disabled"),this.$prevBtn.hasClass("page-end")&&this.$nextBtn.hasClass("page-end")&&this.$primaryPaging.plugin("lark.combobox").disable(),0!==parseInt(this.$count.html(),10)?this.$pageSize.plugin("domx.selectlist").enable():this.$pageSize.plugin("domx.selectlist").disable(),this._view&&this._view.enabled({status:!0}),this.isDisabled=!1,this.$element.removeClass("disabled"),this.$element.trigger("enabled.lark.repeater")},getDataOptions:function(e){var i=e||{};void 0!==i.pageIncrement&&(null===i.pageIncrement?this.currentPage=0:this.currentPage+=i.pageIncrement);var s={};i.dataSourceOptions&&(s=i.dataSourceOptions,i.preserveDataSourceOptions&&(this.storedDataSourceOpts?this.storedDataSourceOpts=t.mixin(this.storedDataSourceOpts,s):this.storedDataSourceOpts=s)),this.storedDataSourceOpts&&(s=t.mixin(this.storedDataSourceOpts,s));var n={view:this.currentView,pageIndex:this.currentPage,filter:{text:"All",value:"all"}};this.$filters.length>0&&(n.filter=this.$filters.plugin("domx.selectlist").selectedItem()),this.infiniteScrollingEnabled||(n.pageSize=25,this.$pageSize.length>0&&(n.pageSize=parseInt(this.$pageSize.plugin("domx.selectlist").selectedItem().value,10)));var a=this.$search&&this.$search.find("input")&&this.$search.find("input").val();return""!==a&&(n.search=a),this._view&&(n=this._view.dataOptions(n)),n=t.mixin(n,s)},infiniteScrolling:function(e,t){var i=this.$element.find(".repeater-footer"),s=this.$element.find(".repeater-viewport"),n=t||{};if(e)this.infiniteScrollingEnabled=!0,this.infiniteScrollingEnd=n.end,delete n.dataSource,delete n.end,this.infiniteScrollingOptions=n,s.css({height:s.height()+i.outerHeight()}),i.hide();else{var a=this.infiniteScrollingCont,o=a.data();delete o.infinitescroll,a.off("scroll"),a.removeClass("infinitescroll"),this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},s.css({height:s.height()-i.outerHeight()}),i.show()}},infiniteScrollPaging:function(e){var t=!0!==this.infiniteScrollingEnd?this.infiniteScrollingEnd:void 0,i=e.page,s=e.pages;this.currentPage=void 0!==i?i:NaN,(!0===e.end||this.currentPage+1>=s)&&this.infiniteScrollingCont.infinitescroll("end",t)},initInfiniteScrolling:function(){var e=this.$canvas.find('[data-infinite="true"]:first');if((e=e.length<1?this.$canvas:e).data("fu.infinitescroll"))e.infinitescroll("enable");else{var i=this,s=t.mixin({},this.infiniteScrollingOptions);s.dataSource=function(e,t){i.infiniteScrollingCallback=t,i.render({pageIncrement:1})},e.infinitescroll(s),this.infiniteScrollingCont=e}},initViewTypes:function(e){for(var t=this._views=[],i=this.options.addons.views,s=0;s<i.length;s++){var n=this.constructor.addons.views[i[s]];if(!n)throw new Error("The view type "+i[s]+" is not defined!");var a=n.ctor;this._views.push(this._views[i[s]]=new a(this))}t.length>0?f.call(this,0,i,e):e()},itemization:function(e){this.$count.html(void 0!==e.count?e.count:"?"),this.$end.html(void 0!==e.end?e.end:"?"),this.$start.html(void 0!==e.start?e.start:"?")},next:function(){this.$nextBtn.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.pageIncrement=1,this.$element.trigger("nextClicked.lark.repeater"),this.render({pageIncrement:this.pageIncrement})},pageInputChange:function(e,t){var i;if(e!==this.lastPageInput){this.lastPageInput=e;var s=parseInt(e,10)-1;i=s-this.currentPage,this.$element.trigger("pageChanged.lark.repeater",[s,t]),this.render({pageIncrement:i})}},pagination:function(e){this.$primaryPaging.removeClass("active"),this.$secondaryPaging.removeClass("active");var t=e.pages;this.currentPage=void 0!==e.page?e.page:NaN;var i=0===t?0:this.currentPage+1;if(t<=this.options.dropPagingCap){this.$primaryPaging.addClass("active");var s=this.$primaryPaging.find(".dropdown-menu");s.empty();for(var n=0;n<t;n++){var a=n+1;s.append('<li data-value="'+a+'"><a href="#">'+a+"</a></li>")}this.$primaryPaging.find("input.form-control").val(i)}else this.$secondaryPaging.addClass("active"),this.$secondaryPaging.val(i);this.lastPageInput=this.currentPage+1+"",this.$pages.html(""+t),this.currentPage+1<t?(this.$nextBtn.removeAttr("disabled"),this.$nextBtn.removeClass("page-end")):(this.$nextBtn.attr("disabled","disabled"),this.$nextBtn.addClass("page-end")),this.currentPage-1>=0?(this.$prevBtn.removeAttr("disabled"),this.$prevBtn.removeClass("page-end")):(this.$prevBtn.attr("disabled","disabled"),this.$prevBtn.addClass("page-end")),0!==this.pageIncrement&&(this.pageIncrement>0?this.$nextBtn.is(":disabled")?this.$prevBtn.focus():this.$nextBtn.focus():this.$prevBtn.is(":disabled")?this.$nextBtn.focus():this.$prevBtn.focus())},previous:function(){this.$nextBtn.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.pageIncrement=-1,this.$element.trigger("previousClicked.lark.repeater"),this.render({pageIncrement:this.pageIncrement})},render:function(e){this.disable();var t=!1,i=e||{};if(i.changeView&&this.currentView!==i.changeView){var s=this.currentView;this.currentView=i.changeView,this.viewType=this.currentView.split(".")[0],this._view=this._views[this.viewType],this.$element.attr("data-currentview",this.currentView),this.$element.attr("data-viewtype",this.viewType),t=!0,i.viewChanged=t,this.$element.trigger("viewChanged.lark.repeater",this.currentView),this.infiniteScrollingEnabled&&this.infiniteScrolling(!1),this._view.selected({prevView:s})}this.syncViewButtonState(),i.preserve=void 0!==i.preserve?i.preserve:!t,this.clear(i),(!this.infiniteScrollingEnabled||this.infiniteScrollingEnabled&&t)&&(this._throbber=this.throb({className:"throbWrap"}));var n=this.getDataOptions(i),a=this.options.dataSource,o=this,r=this._view;a(n,function(e){g.call(o,{data:e,dataOptions:n,options:i,viewChanged:t,viewTypeObj:r})})},resize:function(){for(var e,t,i,s=-1===this.options.staticHeight?this.$element.attr("data-staticheight"):this.options.staticHeight,n=[],a=[],o=this.$element.parentsUntil(":visible"),l=0;l<o.length&&this.$element.is(":hidden");)i=o[l],r(i).is(":hidden")&&(a.push(i.style.display),i.style.display="block",n.push(i)),l++;if(void 0!==s&&!1!==s&&"false"!==s){this.$canvas.addClass("scrolling"),t={bottom:this.$viewport.css("margin-bottom"),top:this.$viewport.css("margin-top")};var h="true"===s||!0===s?this.$element.height():parseInt(s,10),d=this.$element.find(".repeater-header").outerHeight(),c=this.$element.find(".repeater-footer").outerHeight(),p="auto"===t.bottom?0:parseInt(t.bottom,10),u="auto"===t.top?0:parseInt(t.top,10);e=h-d-c-p-u,this.$viewport.outerHeight(e)}else this.$canvas.removeClass("scrolling");this._view&&this._view.resize({height:this.$element.outerHeight(),width:this.$element.outerWidth()}),n.forEach(function(e,t){e.style.display=a[t]})},renderItems:function(e,t,i){if(e.render)e.render({container:this.$canvas,data:t},i),i(t);else{if(e.before){var s=e.before({container:this.$canvas,data:t});u(this.$canvas,s)}var n=this.$canvas.find('[data-container="true"]:last'),a=n.length>0?n:this.$canvas;if(e.renderItem){var o,r=e.repeat||"data.items",l=r.split("."),h=l[0];if("data"===h||"this"===h){o="this"===h?this:t;for(var d=l.slice(1),p=0;p<d.length;p++){if(void 0===o[d[p]]){o=[],c("WARNING: Repeater unable to find property to iterate renderItem on.");break}o=o[d[p]]}for(var m=0;m<o.length;m++){var f=e.renderItem({container:a,data:t,index:m,subset:o});u(a,f)}}else c('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"')}if(e.after){var g=e.after({container:this.$canvas,data:t});u(this.$canvas,g)}i(t)}},viewChanged:function(e){var t=r(e.target),i=t.val();this.syncingViewButtonState||(this.isDisabled||t.parents("label:first").hasClass("disabled")?this.syncViewButtonState():this.render({changeView:i,pageIncrement:null}))},syncViewButtonState:function(){var e=this.$views.find('input[value="'+this.currentView+'"]');this.syncingViewButtonState=!0,this.$views.find("input").prop("checked",!1),this.$views.find("label.active").removeClass("active"),e.length>0&&(e.prop("checked",!0),e.parents("label:first").addClass("active")),this.syncingViewButtonState=!1},getNestedProperty:function(e,t){return t.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(t,i,s,n,a){var o=a||i||s||n&&parseInt(n,10);t&&e&&(e=e[o])}),e},getDataProperty:function(e,t){var i,s;if(e.dataset?(i=t.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),s=e.dataset[i]):e.getAttribute&&(s=e.getAttribute("data-"+t.replace(/([A-Z])/g,"-$1").toLowerCase())),"string"==typeof s){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(s))try{return r.parseJSON(s)}catch(e){}return s}},getItemProperty:function(e,t){var i=this.getDataProperty(e,t);return void 0===i&&(i=e[t]),void 0===i&&(i=this.getNestedProperty(e,t)),i}}),c=function(e){window.console&&window.console.warn&&window.console.warn(e)},p=function e(t){var i=[];t.children().each(function(){var t=r(this),s=t.attr("data-preserve");"deep"===s?(t.detach(),i.push(t)):"shallow"===s&&(e(t),t.detach(),i.push(t))}),t.empty(),t.append(i)},u=function(e,t){var i;if(t&&"none"!==(i=t.action?t.action:"append")&&void 0!==t.item){var s=void 0!==t.container?r(t.container):e;s[i](t.item)}},m=function(e,t,i){var s=e+1;s<t.length?f.call(this,s,t,i):i()},f=function(e,t,i){t[e].initialize?t[e].initialize.call(this,{},function(){m.call(this,e,t,i)}):m.call(this,e,t,i)},g=function(e){var t=e.data||{};this.infiniteScrollingEnabled?this.infiniteScrollingCallback({}):(this.itemization(t),this.pagination(t));var i=this;this.renderItems(e.viewTypeObj,t,function(t){e.data=t,function(e){var t=e.data||{};this.infiniteScrollingEnabled&&((e.viewChanged||e.options.clearInfinite)&&this.initInfiniteScrolling(),this.infiniteScrollPaging(t,e.options));this._throbber&&(this._throbber.remove(),this._throbber=null);this.enable(),this.$search.trigger("rendered.lark.repeater",{data:t,options:e.dataOptions,renderOptions:e.options}),this.$element.trigger("rendered.lark.repeater",{data:t,options:e.dataOptions,renderOptions:e.options}),this.$element.trigger("loaded.lark.repeater",e.dataOptions)}.call(i,e)})};return d.addons={},e.attach("widgets.Repeater",d)}),e("skylark-widgets-repeater/views",["./Repeater"],function(e){return e.addons.views={}}),e("skylark-widgets-repeater/views/ViewBase",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","../views"],function(e,t,i,s){var n=e.Evented.inherit({klassName:"ViewBase",options:{controlsClass:"skylarkui-repeater-controls",fullScreen:!1},_create$Item:function(t,s){var n=!1;function a(){var i,a,o;a=t.indexOf("{{"),i=t.indexOf("}}",a+2),a>-1&&i>-1?(o=e.trim(t.substring(a+2,i)),o=void 0!==s[o]?s[o]:"",t=t.substring(0,a)+o+t.substring(i+2)):n=!0}for(;!n&&t.search("{{")>=0;)a();return i(t)},init:function(e,i){var s,n=this;this.repeater=e,this.initOptions(i),this.options.fullScreen&&t.fullScreen(this.container[0]),this.repeater.on("item.running",function(e){n.container.hasClass(n.options.controlsClass)?(s=!0,n.container.removeClass(n.options.controlsClass)):s=!1}),this.repeater.on("item.running",function(e){s&&n.container.addClass(n.options.controlsClass)})},initOptions:function(t){var i=this.constructor,s=i.cache=i.cache||{},n=s.defaults;if(!n){var a=[];do{if(a.unshift(i),i===Plugin)break;i=i.superclass}while(i);n=s.defaults={};for(var o=0;o<a.length;o++)(i=a[o]).prototype.hasOwnProperty("options")&&e.mixin(n,i.prototype.options,!0),i.hasOwnProperty("options")&&e.mixin(n,i.options,!0)}return Object.defineProperty(this,"options",{value:e.mixin({},n,t,!0)}),this.options},close:function(){t.fullScreen()===this.container[0]&&t.fullScreen(!1)},getValue:function(){return this.getSelectedItems()},cleared:function(){},selected:function(){},dataOptions:function(e){return e},enabled:function(e){}});return s.ViewBase=n}),e("skylark-widgets-repeater/views/LinearView",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","../views","./ViewBase"],function(e,t,i,s,n,a,o,r){var l=r.inherit({klassName:"LinearView",options:{alignment:"left",infiniteScroll:!1,itemRendered:null,noItemsHTML:"no items found",selectable:!1,template:'<ul class="clearfix repeater-linear" data-container="true" data-infinite="true" data-preserve="shallow"></ul>',item:{template:'<li class="repeater-item"><img  src="{{ThumbnailImage}}" class="thumb"/><h4 class="title">{{name}}</h4></div>'}},clearSelectedItems:function(){this.repeater.$canvas.find(".repeater-linear .selectable.selected").removeClass("selected")},getSelectedItems:function(){var e=[];return this.repeater.$canvas.find(".repeater-linear .selectable.selected").each(function(){e.push(a(this))}),e},setSelectedItems:function(t,i){var s,n,o,r,l=this.options.selectable,h=this;function d(){if(r===t[s].index)return n=a(this),!1;r++}function c(){(n=a(this)).is(t[s].selector)&&p(n,t[s].selected)}function p(e,t){(t=void 0===t||t)?(i||"multi"===l||h.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}for(e.isArray(t)||(t=[t]),o=!0===i||"multi"===l?t.length:l&&t.length>0?1:0,s=0;s<o;s++)void 0!==t[s].index?(n=a(),r=0,this.repeater.$canvas.find(".repeater-linear .selectable").each(d),n.length>0&&p(n,t[s].selected)):t[s].selector&&this.repeater.$canvas.find(".repeater-linear .selectable").each(c)},selected:function(){var e,t=this.options.infiniteScroll;t&&(e="object"==typeof t?t:{},this.infiniteScrolling(!0,e))},before:function(e){this.options.alignment;var t=this.repeater.$canvas.find(".repeater-linear"),i=(e.data,{});return t.length<1?(t=a(this.options.template),i.item=t):i.action="none",i},renderItem:function(e){var t=this.options.selectable,i=this,s=this._create$Item(this.options.item.template,e.subset[e.index]);return s.data("item_data",e.data.items[e.index]),t&&(s.addClass("selectable"),s.on("click",function(){i.isDisabled||(s.hasClass("selected")?(s.removeClass("selected"),i.repeater.$element.trigger("deselected.lark.repeaterList",s)):("multi"!==t&&i.repeater.$canvas.find(".repeater-linear .selectable.selected").each(function(){var e=a(this);e.removeClass("selected"),i.repeater.$element.trigger("deselected.lark.repeaterList",e)}),s.addClass("selected"),i.repeater.$element.trigger("selected.lark.repeaterList",s)))})),e.container.append(s),this.options.itemRendered&&this.options.itemRendered({container:e.container,item:$thumbnail,itemData:e.subset[e.index]},function(){}),!1}});return o.linear={name:"linear",ctor:l},l}),e("skylark-widgets-repeater/views/SliderView",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","../views","./ViewBase"],function(e,t,i,s,n){"use strict";var a=n.inherit({klassName:"SliderView",options:{container:null,slidesContainer:"div.slides",titleElement:"h3",displayClass:"slider-display",singleClass:"slider-single",leftEdgeClass:"slider-left",rightEdgeClass:"slider-right",playingClass:"slider-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",displayTransition:!0,clearSlides:!0,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!1,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!0,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"ThumbnailImage",thumbnailIndicators:!0,indicators:{hidePageScrollbars:!1,indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0},template:'<div class="repeater-slider"><div class="slides"></div><h3 class="title"></h3><a class="prev">‹</a><a class="next">›</a><a class="play-pause"></a><ol class="indicator"></ol></div>',item:{template:'<img height="75" src="{{ThumbnailImage}}" width="65"/>'}},support:function(e){var t,s={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},n={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t]){s.transition=n[t],s.transition.name=t;break}function a(){var t,i,n=s.transition;document.body.appendChild(e),n&&(t=n.name.slice(0,-9)+"ransform",void 0!==e.style[t]&&(e.style[t]="translateZ(0)",i=window.getComputedStyle(e).getPropertyValue(n.prefix+"transform"),s.transform={prefix:n.prefix,name:t,translate:!0,translateZ:!!i&&"none"!==i})),void 0!==e.style.backgroundSize&&(s.backgroundSize={},e.style.backgroundSize="contain",s.backgroundSize.contain="contain"===window.getComputedStyle(e).getPropertyValue("background-size"),e.style.backgroundSize="cover",s.backgroundSize.cover="cover"===window.getComputedStyle(e).getPropertyValue("background-size")),document.body.removeChild(e)}return document.body?a():i(document).on("DOMContentLoaded",a),s}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,render:function(e){this.container=this.repeater.$canvas.find(".repeater-slider"),this.container.length<1&&(this.container=i(this.options.template),this.repeater.$canvas.append(this.container)),this.list=e.data.items,this.num=this.list.length,this.initStartIndex(),this.initView(),this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(e,t){window.clearTimeout(this.timeout);var i,s,n,a=this.index;if(a!==e&&1!==this.num){if(t||(t=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(e=this.circle(e)),i=Math.abs(a-e)/(a-e),this.options.continuous&&(s=i,(i=-this.positions[this.circle(e)]/this.slideWidth)!==s&&(e=-i*this.num+e)),n=Math.abs(a-e)-1;n;)n-=1,this.move(this.circle((e>a?e:a)-n-1),this.slideWidth*i,0);e=this.circle(e),this.move(a,this.slideWidth*i,t),this.move(e,0,t),this.options.continuous&&this.move(this.circle(e-i),-this.slideWidth*i,0)}else e=this.circle(e),this.animate(a*-this.slideWidth,e*-this.slideWidth,t);this.onslide(e)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},circle:function(e){return(this.num+e%this.num)%this.num},move:function(e,t,i){this.translateX(e,t,i),this.positions[e]=t},translate:function(e,t,i,s){var n=this.slides[e].style,a=this.support.transition,o=this.support.transform;n[a.name+"Duration"]=s+"ms",n[o.name]="translate("+t+"px, "+i+"px)"+(o.translateZ?" translateZ(0)":"")},translateX:function(e,t,i){this.translate(e,t,0,i)},translateY:function(e,t,i){this.translate(e,0,t,i)},animate:function(e,t,i){if(i)var s=this,n=(new Date).getTime(),a=window.setInterval(function(){var o=(new Date).getTime()-n;if(o>i)return s.slidesContainer[0].style.left=t+"px",s.ontransitionend(),void window.clearInterval(a);s.slidesContainer[0].style.left=(t-e)*(Math.floor(o/i*100)/100)+e+"px"},4);else this.slidesContainer[0].style.left=t+"px"},play:function(e){var t=this;window.clearTimeout(this.timeout),this.interval=e||this.options.slideshowInterval,this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(e,i){t.animationFrameId=t.requestAnimationFrame.call(window,function(){t.slide(e,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(e){var t;for(e.concat||(e=Array.prototype.slice.call(e)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(e),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),t=this.num-e.length;t<this.num;t+=1)this.addSlide(t),this.positionSlide(t);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[],this.indicatorContainer.empty(),this.indicators=[]},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(e){e.which&&1===e.which&&"VIDEO"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&(e.preventDefault(),(e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchstart(e))},onmousemove:function(e){this.touchStart&&((e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchmove(e))},onmouseup:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var i=e.target,s=e.relatedTarget;s&&(s===i||t.contains(i,s))||this.onmouseup(e)}},ontouchstart:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t=(e.originalEvent||e).touches[0];this.touchStart={x:t.pageX,y:t.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,i,s=(e.originalEvent||e).touches[0],n=(e.originalEvent||e).scale,a=this.index;if(!(s.length>1||n&&1!==n))if(this.options.disableScroll&&e.preventDefault(),this.touchDelta={x:s.pageX-this.touchStart.x,y:s.pageY-this.touchStart.y},t=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(t)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(a,this.touchDelta.y+this.positions[a],0);else for(e.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(a+1),a,this.circle(a-1)]:(this.touchDelta.x=t/=!a&&t>0||a===this.num-1&&t<0?Math.abs(t)/this.slideWidth+1:1,i=[a],a&&i.push(a-1),a<this.num-1&&i.unshift(a+1));i.length;)a=i.pop(),this.translateX(a,t+this.positions[a],0)},ontouchend:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,i,s,n,a,o=this.index,r=this.options.transitionSpeed,l=this.slideWidth,h=Number(Date.now()-this.touchStart.time)<250,d=h&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>l/2,c=!o&&this.touchDelta.x>0||o===this.num-1&&this.touchDelta.x<0;!d&&this.options.closeOnSwipeUpOrDown&&(h&&Math.abs(this.touchDelta.y)>20||(Math.abs(this.touchDelta.y),this.slideHeight));this.options.continuous&&(c=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?this.translateY(o,0,r):d&&!c?(i=o+t,s=o-t,n=l*t,a=-l*t,this.options.continuous?(this.move(this.circle(i),n,0),this.move(this.circle(o-2*t),a,0)):i>=0&&i<this.num&&this.move(i,n,0),this.move(o,this.positions[o]+n,r),this.move(this.circle(s),this.positions[this.circle(s)]+n,r),o=this.circle(s),this.onslide(o)):this.options.continuous?(this.move(this.circle(o-1),-l,r),this.move(o,0,r),this.move(this.circle(o+1),l,r)):(o&&this.move(o-1,-l,r),this.move(o,0,r),o<this.num-1&&this.move(o+1,l,r))},ontouchcancel:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},ontransitionend:function(e){var t=this.slides[this.index];e&&t!==e.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,t]))},onkeydown:function(e){switch(e.which||e.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(e),this.toggleControls());break;case 27:break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(e),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.next())}},handleClick:function(e){var t=this.options,s=e.target||e.srcElement,n=s.parentNode;if(n===this.indicatorContainer[0])this.preventDefault(e),this.slide(this.getNodeIndex(s));else if(n.parentNode===this.indicatorContainer[0])this.preventDefault(e),this.slide(this.getNodeIndex(n));else{function a(e){return i(s).hasClass(e)||i(n).hasClass(e)}a(t.toggleClass)?(this.preventDefault(e),this.toggleControls()):a(t.prevClass)?(this.preventDefault(e),this.prev()):a(t.nextClass)?(this.preventDefault(e),this.next()):a(t.playPauseClass)?(this.preventDefault(e),this.toggleSlideshow()):n===this.slidesContainer[0]?t.toggleControlsOnSlideClick&&(this.preventDefault(e),this.toggleControls()):n.parentNode&&n.parentNode===this.slidesContainer[0]&&t.toggleControlsOnSlideClick&&(this.preventDefault(e),this.toggleControls())}},onclick:function(e){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)))return this.handleClick(e);delete this.touchDelta},updateEdgeClasses:function(e){e?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),e===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(e){this.options.continuous||this.updateEdgeClasses(e),this.loadElements(e),this.options.unloadElements&&this.unloadElements(e),this.setTitle(e),this.setActiveIndicator(e)},onslide:function(e){this.index=e,this.handleSlide(e),this.setTimeout(this.options.onslide,[e,this.slides[e]])},setTitle:function(e){var t=this.slides[e].firstChild,i=t.title||t.alt,s=this.titleElement;s.length&&(this.titleElement.empty(),i&&s[0].appendChild(document.createTextNode(i)))},setTimeout:function(e,t,i){var s=this;return e&&window.setTimeout(function(){e.apply(s,t||[])},i||0)},createElement:function(e,t){var i=this._create$Item(this.options.item.template,e);return i.find("img").on("load error",t),i.addClass(this.options.slideContentClass),i},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=i(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,i(this.slides[e]).append(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(e){var t,i=Math.min(this.num,2*this.options.preloadRange+1),s=e;for(t=0;t<i;t+=1)s+=t*(t%2==0?-1:1),s=this.circle(s),this.loadElement(s)},unloadElements:function(e){var t,i;for(t in this.elements)this.elements.hasOwnProperty(t)&&(i=Math.abs(e-t))>this.options.preloadRange&&i+this.options.preloadRange<this.num&&(this.unloadSlide(t),delete this.elements[t])},createIndicator:function(e){var t,s,n=this.repeater,a=this.indicatorPrototype.cloneNode(!1),o=n.getItemProperty(e,"title"),r=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(r&&(t=n.getItemProperty(e,r)),void 0===t&&(s=e.getElementsByTagName&&i(e).find("img")[0])&&(t=s.src),t&&(a.style.backgroundImage='url("'+t+'")')),o&&(a.title=o),a},addIndicator:function(e){if(this.indicatorContainer.length){var t=this.createIndicator(this.list[e]);t.setAttribute("data-index",e),this.indicatorContainer[0].appendChild(t),this.indicators.push(t)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=i(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},addSlide:function(e){var t=this.slidePrototype.cloneNode(!1);t.setAttribute("data-index",e),this.slidesContainer[0].appendChild(t),this.slides.push(t),this.addIndicator(e)},positionSlide:function(e){var t=this.slides[e];t.style.width=this.slideWidth+"px",this.support.transform&&(t.style.left=e*-this.slideWidth+"px",this.move(e,this.index>e?-this.slideWidth:this.index<e?this.slideWidth:0,0))},initSlides:function(e){var t,s;for(e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children),this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),i(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,t=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",t&&this.resetSlides(),s=0;s<this.num;s+=1)t&&this.addSlide(s),this.positionSlide(s);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(e){var t,i;t=this.slides[e],null!==(i=t.firstChild)&&t.removeChild(i)},unloadAllSlides:function(){var e,t;for(e=0,t=this.slides.length;e<t;e++)this.unloadSlide(e)},toggleControls:function(){var e=this.options.controlsClass;this.container.hasClass(e)?this.container.removeClass(e):this.container.addClass(e)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(e){return parseInt(e.getAttribute("data-index"),10)},initStartIndex:function(){var e,t=this.repeater,i=this.options.index;if(i&&"number"!=typeof i)for(e=0;e<this.num;e+=1)if(this.list[e]===i||t.getItemUrl(this.list[e])===t.getItemUrl(i)){i=e;break}this.index=this.circle(parseInt(i,10)||0)},initEventListeners:function(){var e=this,t=this.slidesContainer;function s(t){var i=e.support.transition&&e.support.transition.end===t.type?"transitionend":t.type;e["on"+i](t)}i(window).on("resize",s),i(document.body).on("keydown",s),this.container.on("click",s),this.support.touch?t.on("touchstart touchmove touchend touchcancel",s):this.options.emulateTouchEvents&&this.support.transition&&t.on("mousedown mousemove mouseup mouseout",s),this.support.transition&&t.on(this.support.transition.end,s),this.proxyListener=s},destroyEventListeners:function(){var e=this.slidesContainer,t=this.proxyListener;i(window).off("resize",t),i(document.body).off("keydown",t),this.container.off("click",t),this.support.touch?e.off("touchstart touchmove touchend touchcancel",t):this.options.emulateTouchEvents&&this.support.transition&&e.off("mousedown mousemove mouseup mouseout",t),this.support.transition&&e.off(this.support.transition.end,t)},initView:function(){if(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),!this.slidesContainer.length)return console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1;this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),this.container.addClass(this.options.displayClass)},initOptions:function(t){this.overrided(e.mixin({},a.prototype.options,t)),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}});return s.slider={name:"slider",ctor:a},a}),e("skylark-widgets-repeater/views/TableView",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","../views","./ViewBase"],function(e,t,i,s,n,a,o,r){var l=r.inherit({klassName:"TableView",options:{columnRendered:null,columnSizing:!0,columnSyncing:!0,highlightSortedColumn:!0,infiniteScroll:!1,noItemsHTML:"no items found",selectable:!1,sortClearing:!1,rowRendered:null,frozenColumns:0,actions:!1,viewClass:"repeater-table",tableWrapperClass:"repeater-table-wrapper",checkClass:"repeater-table-check",headingClass:"repeater-table-heading",actionsPlaceHolderClass:"repeater-table-actions-placeholder"},clearSelectedItems:function(){this.repeater.$canvas.find(`.${this.options.checkClass}`).remove(),this.repeater.$canvas.find(`.${this.options.viewClass} table tbody tr.selected`).removeClass("selected")},highlightColumn:function(e,t){var i=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table tbody`);(this.options.highlightSortedColumn||t)&&(i.find("td.sorted").removeClass("sorted"),i.find("tr").each(function(){var t=a(this).find("td:nth-child("+(e+1)+")").filter(function(){return!a(this).parent().hasClass("empty")});t.addClass("sorted")}))},getSelectedItems:function(){var e=[];return this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr.selected`).each(function(){var t=a(this);e.push({data:t.data("item_data"),element:t})}),e},positionHeadings:function(){var e=this.repeater.$element.find(`.${this.options.tableWrapperClass}`),t=e.offset().left,i=e.scrollLeft();i>0?e.find(`.${this.options.headingClass}`).each(function(){var e=a(this),i=e.parents("th:first").offset().left-t+"px";e.addClass("shifted").css("left",i)}):e.find(`.${this.options.headingClass}`).each(function(){a(this).removeClass("shifted").css("left","")})},setSelectedItems:function(e,t){var i,s,n,o=this.options.selectable,r=this,l=e;a.isArray(l)||(l=[l]);var h=function(e){s=a(this),(s.data("item_data")||{})[l[i].property]===l[i].value&&d(s,l[i].selected,e)},d=function(e,i,s){var n,a=void 0===i||i;a?(t||"multi"===o||r.clearSelectedItems(),e.hasClass("selected")||(e.addClass("selected"),(r.options.frozenColumns||"multi"===r.options.selectable)&&((n=r.repeater.$element.find(".frozen-column-wrapper tr:nth-child("+(s+1)+")")).addClass("selected"),n.find(".repeater-select-checkbox").addClass("checked")),r.options.actions&&r.repeater.$element.find(".actions-column-wrapper tr:nth-child("+(s+1)+")").addClass("selected"),e.find("td:first").prepend(`<div class="${this.options.checkClass}"><span class="glyphicon glyphicon-ok"></span></div>`))):(r.options.frozenColumns&&((n=r.repeater.$element.find(".frozen-column-wrapper tr:nth-child("+(s+1)+")")).addClass("selected"),n.find(".repeater-select-checkbox").removeClass("checked")),r.options.actions&&r.repeater.$element.find(".actions-column-wrapper tr:nth-child("+(s+1)+")").removeClass("selected"),e.find(`.${this.options.checkClass}`).remove(),e.removeClass("selected"))};for(n=!0===t||"multi"===o?l.length:o&&l.length>0?1:0,i=0;i<n;i++)void 0!==l[i].index?(s=this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr:nth-child(`+(l[i].index+1)+")")).length>0&&d(s,l[i].selected,l[i].index):void 0!==l[i].property&&void 0!==l[i].value&&this.repeater.$canvas.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table tbody tr`).each(h)},sizeHeadings:function(){var e=this.repeater.$element.find(`.${this.options.viewClass} table`),t=this;e.find("thead th").each(function(){var e=a(this),i=e.find(`.${t.options.headingClass}`);i.css({height:e.outerHeight()}),i.outerWidth(i.data("forced-width")||e.outerWidth())})},setFrozenColumns:function(){var e=this.repeater.$canvas.find(".table-frozen"),t=this.repeater.$element.find(".repeater-canvas"),i=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`),s=this.repeater.$element.find(`.${this.options.viewClass}`),n=this.options.frozenColumns,o=this;if("multi"===this.options.selectable&&(n+=1,t.addClass("multi-select-enabled")),e.length<1){var r=a('<div class="frozen-column-wrapper"></div>').insertBefore(i),l=i.clone().addClass("table-frozen");l.find("th:not(:lt("+n+"))").remove(),l.find("td:not(:nth-child(n+0):nth-child(-n+"+n+"))").remove();var h=l.clone().removeClass("table-frozen");h.find("tbody").remove();var d=a('<div class="frozen-thead-wrapper"></div>').append(h),c=d.find("th label.checkbox-custom.checkbox-inline");c.attr("id",c.attr("id")+"_cloned"),r.append(l),s.append(d),this.repeater.$canvas.addClass("frozen-enabled")}this.sizeFrozenColumns(),a(`.frozen-thead-wrapper .${this.options.headingClass}`).on("click",function(){var e=a(this).parent("th").index();e+=1,o.repeater.$element.find(`.${this.options.tableWrapperClass} > table thead th:nth-child(`+e+`) .${this.options.headingClass}`)[0].click()})},positionColumns:function(){var e=this.repeater.$element.find(".repeater-canvas"),t=e.scrollTop(),i=e.scrollLeft(),s=this.options.frozenColumns||"multi"===this.options.selectable,n=this.options.actions,a=this.repeater.$element.find(".repeater-canvas").outerWidth(),o=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`).outerWidth(),r=this.repeater.$element.find(".table-actions")?this.repeater.$element.find(".table-actions").outerWidth():0,l=o-(a-r)>=i;t>0?e.find(`.${this.options.headingClass}`).css("top",t):e.find(`.${this.options.headingClass}`).css("top","0"),i>0?(s&&(e.find(".frozen-thead-wrapper").css("left",i),e.find(".frozen-column-wrapper").css("left",i)),n&&l&&(e.find(".actions-thead-wrapper").css("right",-i),e.find(".actions-column-wrapper").css("right",-i))):(s&&(e.find(".frozen-thead-wrapper").css("left","0"),e.find(".frozen-column-wrapper").css("left","0")),n&&(e.find(".actions-thead-wrapper").css("right","0"),e.find(".actions-column-wrapper").css("right","0")))},createItemActions:function(){var e,t,i="",s=this,n=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`),o=this.repeater.$canvas.find(".table-actions");for(e=0,t=this.options.actions.items.length;e<t;e++){var r=this.options.actions.items[e],l=r.html;i+='<li><a href="#" data-action="'+r.name+'" class="action-item"> '+l+"</a></li>"}var h='<div class="btn-group"><button type="button" class="btn btn-xs btn-default dropdown-toggle repeater-actions-button" data-toggle="dropdown" data-flip="auto" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu">'+i+"</ul></div>";if(o.length<1){var d=a('<div class="actions-column-wrapper" style="width: '+this.actions_width+'px"></div>').insertBefore(n),c=n.clone().addClass("table-actions");if(c.find("th:not(:last-child)").remove(),c.find("tr td:not(:last-child)").remove(),"multi"===this.options.selectable||"action"===this.options.selectable)c.find("thead tr").html(`<th><div class="${this.options.headingClass}">`+h+"</div></th>"),"action"!==this.options.selectable&&c.find("thead .btn").attr("disabled","disabled");else{var p=this.options.actions.label||'<span class="actions-hidden">a</span>';c.find("thead tr").addClass("empty-heading").html("<th>"+p+`<div class="${this.options.headingClass}">`+p+"</div></th>")}var u=c.find("td");u.each(function(e){a(this).html(h),a(this).find("a").attr("data-row",e+1)}),d.append(c),this.repeater.$canvas.addClass("actions-enabled")}this.sizeActionsTable(),this.repeater.$element.find(".table-actions tbody .action-item").on("click",function(e){if(!s.isDisabled){var t=a(this).data("action"),i=a(this).data("row"),n={actionName:t,rows:[i]};s.getActionItems(n,e)}}),this.repeater.$element.find(".table-actions thead .action-item").on("click",function(e){if(!s.isDisabled){var t=a(this).data("action"),i={actionName:t,rows:[]},n=`.${this.options.tableWrapperClass} > table .selected`;"action"===s.options.selectable&&(n=`.${this.options.tableWrapperClass} > table tr`),s.repeater.$element.find(n).each(function(e){i.rows.push(e+1)}),s.getActionItems(i,e)}})},getActionItems:function(e,t){for(var i=[],s=a.grep(this.options.actions.items,function(t){return t.name===e.actionName})[0],n=0,o=e.rows.length;n<o;n++){var r=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table tbody tr:nth-child(`+e.rows[n]+")");i.push({item:r,rowData:r.data("item_data")})}if(1===i.length&&(i=i[0]),s.clickAction){s.clickAction(i,function(){},t)}},sizeActionsTable:function(){var e=this.repeater.$element.find(`.${this.options.viewClass} table.table-actions`),t=e.find("thead tr th"),i=this.repeater.$element.find(`.${this.options.tableWrapperClass} > table`);t.outerHeight(i.find("thead tr th").outerHeight()),t.find(`.${this.options.headingClass}`).outerHeight(t.outerHeight()),e.find("tbody tr td:first-child").each(function(e){a(this).outerHeight(i.find("tbody tr:eq("+e+") td").outerHeight())})},sizeFrozenColumns:function(){var e=this.repeater.$element.find(`.${this.options.viewClass} .${this.options.tableWrapperClass} > table`);this.repeater.$element.find(`.${this.options.viewClass} table.table-frozen tr`).each(function(t){a(this).height(e.find("tr:eq("+t+")").height())});var t=e.find("td:eq(0)").outerWidth();this.repeater.$element.find(".frozen-column-wrapper, .frozen-thead-wrapper").width(t)},frozenOptionsInitialize:function(){var e=this.repeater.$element.find(".frozen-column-wrapper .checkbox-inline"),t=this.repeater.$element.find(".header-checkbox .checkbox-custom"),i=this.repeater.$element.find(`.${this.options.viewClass} table`),s=this;this.repeater.$element.find("tr.selectable").on("mouseover mouseleave",function(e){var t=a(this).index();t+=1,"mouseover"===e.type?i.find("tbody tr:nth-child("+t+")").addClass("hovered"):i.find("tbody tr:nth-child("+t+")").removeClass("hovered")}),t.checkbox(),e.checkbox();var n=this.repeater.$element.find(".table-frozen tbody .checkbox-inline"),o=this.repeater.$element.find(".frozen-thead-wrapper thead .checkbox-inline input");function r(e){s.revertingCheckbox=!0,e.checkbox("toggle"),delete s.revertingCheckbox}n.on("change",function(e){if(e.preventDefault(),!s.revertingCheckbox)if(s.isDisabled)r(a(e.currentTarget));else{var t=a(this).attr("data-row");t=parseInt(t,10)+1,s.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr:nth-child(`+t+")").click();var i=s.repeater.$element.find(".table-frozen tbody .checkbox-inline.checked").length;0===i?(o.prop("checked",!1),o.prop("indeterminate",!1)):i===n.length?(o.prop("checked",!0),o.prop("indeterminate",!1)):(o.prop("checked",!1),o.prop("indeterminate",!0))}}),o.on("change",function(t){s.revertingCheckbox||(s.isDisabled?r(a(t.currentTarget)):a(this).is(":checked")?(s.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr:not(.selected)`).click(),s.repeater.$element.trigger("selected.lark.repeaterList",e)):(s.repeater.$element.find(`.${this.options.tableWrapperClass} > table tbody tr.selected`).click(),s.repeater.$element.trigger("deselected.lark.repeaterList",e)))})},cleared:function(){this.options.columnSyncing&&this.sizeHeadings()},dataOptions:function(e){return this.sortDirection&&(e.sortDirection=this.sortDirection),this.sortProperty&&(e.sortProperty=this.sortProperty),e},enabled:function(e){this.options.actions&&(e.status?(this.repeater.$canvas.find(".repeater-actions-button").removeAttr("disabled"),g.call(this)):this.repeater.$canvas.find(".repeater-actions-button").attr("disabled","disabled"))},initialize:function(e,t){this.sortDirection=null,this.sortProperty=null,this.specialBrowserClass=f(),this.actions_width=void 0!==this.options.actions.width?this.options.actions.width:37,this.noItems=!1,t()},resize:function(){m.call(this,this.repeater.$element.find(`.${this.options.tableWrapperClass} > table thead tr`)),this.options.actions&&this.sizeActionsTable(),(this.options.frozenColumns||"multi"===this.options.selectable)&&this.sizeFrozenColumns(),this.options.columnSyncing&&this.sizeHeadings()},selected:function(){var e,t=this.options.infiniteScroll;this.firstRender=!0,this.repeater.$loader.addClass("noHeader"),t&&(e="object"==typeof t?t:{},this.repeater.infiniteScrolling(!0,e))},before:function(e){var t,i=e.container.find(`.${this.options.viewClass}`),s=this;return e.data.count>0?this.noItems=!1:this.noItems=!0,i.length<1&&((i=a(`<div class="${this.options.viewClass} `+this.specialBrowserClass+`" data-preserve="shallow"><div class="${this.options.tableWrapperClass}" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"></table></div></div>`)).find(`.${this.options.tableWrapperClass}`).on("scroll.lark.repeaterList",function(){s.options.columnSyncing&&s.positionHeadings()}),(s.options.frozenColumns||s.options.actions||"multi"===s.options.selectable)&&e.container.on("scroll.lark.repeaterList",function(){s.positionColumns()}),e.container.append(i)),e.container.removeClass("actions-enabled actions-enabled multi-select-enabled"),t=i.find("table"),u.call(this,t,e.data),p.call(this,t,e.data),!1},renderItem:function(e){return c.call(this,e.container,e.subset,e.index),!1},after:function(){var e;return!this.options.frozenColumns&&"multi"!==this.options.selectable||this.noItems||this.setFrozenColumns(),this.options.actions&&!this.noItems&&(this.createItemActions(),this.sizeActionsTable()),!this.options.frozenColumns&&!this.options.actions&&"multi"!==this.options.selectable||this.noItems||(this.positionColumns(),this.frozenOptionsInitialize()),this.options.columnSyncing&&(this.sizeHeadings(),this.positionHeadings()),(e=this.repeater.$canvas.find(`.${this.options.tableWrapperClass} > table .${this.options.headingClass}.sorted`)).length>0&&this.highlightColumn(e.data("fu_item_index")),!1}}),h=function(e,t,i,s,n){var o=s[n].className,r=t[i][s[n].property],l=a("<td></td>"),h=s[n]._auto_width,d=s[n].property;if(!1!==this.options.actions&&"@_ACTIONS_@"===d&&(r=`<div class="${this.options.actionsPlaceHolderClass}" style="width: `+this.actions_width+'px"></div>'),r=void 0!==r?r:"",l.addClass(void 0!==o?o:"").append(r),void 0!==h&&l.outerWidth(h),e.append(l),"multi"===this.options.selectable&&"@_CHECKBOX_@"===s[n].property){var c='<label data-row="'+i+'" class="checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox"><input class="sr-only" type="checkbox"></label>';l.html(c)}return l},d=function(e,t,i){var s,n,o,r,l,h="glyphicon-chevron-down",d="glyphicon-chevron-up",c=a(`<div class="${this.options.headingClass}"><span class="glyphicon rlc"></span></div>`),p=(this.repeater.$element.attr("id")+"_"||"")+"checkall",u=`<div class="${this.options.headingClass} header-checkbox">`+'<label id="'+p+'" class="checkbox-custom checkbox-inline"><input class="sr-only" type="checkbox" value=""><span class="checkbox-label">&nbsp;</span></label></div>',m=a("<th></th>"),f=this;if(c.data("fu_item_index",i),c.prepend(t[i].label),m.html(c.html()).find("[id]").removeAttr("id"),"@_CHECKBOX_@"!==t[i].property?m.append(c):m.append(u),s=m.add(c),r=c.find(".glyphicon.rlc:first"),l=r.add(m.find(".glyphicon.rlc:first")),this.options.actions&&"@_ACTIONS_@"===t[i].property){var g=this.actions_width;m.css("width",g),c.css("width",g)}void 0!==(n=t[i].className)&&s.addClass(n),(o=t[i].sortable)&&(s.addClass("sortable"),c.on("click.lark.repeaterList",function(){f.isDisabled||(f.sortProperty="string"==typeof o?o:t[i].property,c.hasClass("sorted")?r.hasClass(d)?(l.removeClass(d).addClass(h),f.sortDirection="desc"):f.options.sortClearing?(s.removeClass("sorted"),l.removeClass(h),f.sortDirection=null,f.sortProperty=null):(l.removeClass(h).addClass(d),f.sortDirection="asc"):(e.find(`th, .${this.options.headingClass}`).removeClass("sorted"),l.removeClass(h).addClass(d),f.sortDirection="asc",s.addClass("sorted")),f.repeater.render({clearInfinite:!0,pageIncrement:null}))})),"asc"!==t[i].sortDirection&&"desc"!==t[i].sortDirection||(e.find(`th, .${this.options.headingClass}`).removeClass("sorted"),s.addClass("sortable sorted"),"asc"===t[i].sortDirection?(l.addClass(d),this.sortDirection="asc"):(l.addClass(h),this.sortDirection="desc"),this.sortProperty="string"==typeof o?o:t[i].property),e.append(m)},c=function(e,t,i){var s=a("<tr></tr>");if(this.options.selectable&&(s.data("item_data",t[i]),"action"!==this.options.selectable)){s.addClass("selectable"),s.attr("tabindex",0);var n=this;s.on("click.lark.repeaterList",function(){(function(e){var t="multi"===e.options.selectable,i=e.options.actions,s=e.$element;if(!e.isDisabled){var n=a(this),o=a(this).index()+1,r=s.find(".frozen-column-wrapper tr:nth-child("+o+")"),l=s.find(".actions-column-wrapper tr:nth-child("+o+")"),h=s.find(".frozen-column-wrapper tr:nth-child("+o+") .checkbox-inline");n.is(".selected")?(n.removeClass("selected"),t?(h.click(),r.removeClass("selected"),i&&l.removeClass("selected")):n.find(`.${this.options.checkClass}`).remove(),s.trigger("deselected.lark.repeaterList",n)):(t?(h.click(),n.addClass("selected"),r.addClass("selected"),i&&l.addClass("selected")):(e.$canvas.find(`.${this.options.checkClass}`).remove(),e.$canvas.find(`.${this.options.viewClass} tbody tr.selected`).each(function(){a(this).removeClass("selected"),s.trigger("deselected.lark.repeaterList",a(this))}),n.find("td:first").prepend(`<div class="${this.options.checkClass}"><span class="glyphicon glyphicon-ok"></span></div>`),n.addClass("selected"),r.addClass("selected")),s.trigger("selected.lark.repeaterList",n)),g.call(e)}}).call(this,n)}),s.keyup(function(e){13===e.keyCode&&s.trigger("click.lark.repeaterList")})}this.options.actions&&!this.options.selectable&&s.data("item_data",t[i]);for(var o=[],r=0,l=this.columns.length;r<l;r++)o.push(h.call(this,s,t,i,this.columns,r));if(e.append(s),this.options.columnRendered)for(var d=0,c=o.length;d<c;d++)"@_CHECKBOX_@"!==this.columns[d].property&&"@_ACTIONS_@"!==this.columns[d].property&&this.options.columnRendered({container:s,columnAttr:this.columns[d].property,item:o[d],rowData:t[i]},function(){});this.options.rowRendered&&this.options.rowRendered({container:e,item:s,rowData:t[i]},function(){})},p=function(e,t){var i,s=e.find("tbody");s.length<1&&(s=a('<tbody data-container="true"></tbody>'),e.append(s)),"string"==typeof t.error&&t.error.length>0?((i=a('<tr class="empty text-danger"><td colspan="'+this.columns.length+'"></td></tr>')).find("td").append(t.error),s.append(i)):t.items&&t.items.length<1&&((i=a('<tr class="empty"><td colspan="'+this.columns.length+'"></td></tr>')).find("td").append(this.options.noItemsHTML),s.append(i))},u=function(e,t){var i,s,n,o=t.columns||[],r=e.find("thead");if(this.firstRender||function(e,t){if(!t)return!1;if(!e||t.length!==e.length)return!0;for(var i=0,s=t.length;i<s;i++){if(!e[i])return!0;for(var n in t[i])if(t[i].hasOwnProperty(n)&&e[i][n]!==t[i][n])return!0}return!1}(this.columns,o)||0===r.length){if(r.remove(),"multi"===this.options.selectable&&!this.noItems){o.splice(0,0,{label:"c",property:"@_CHECKBOX_@",sortable:!1})}if(this.columns=o,this.firstRender=!1,this.repeater.$loader.removeClass("noHeader"),this.options.actions){var l={label:this.options.actions.label||'<span class="actions-hidden">a</span>',property:"@_ACTIONS_@",sortable:!1,width:this.actions_width};o.push(l)}for(r=a('<thead data-preserve="deep"><tr></tr></thead>'),n=r.find("tr"),i=0,s=o.length;i<s;i++)d.call(this,n,o,i);if(e.prepend(r),"multi"===this.options.selectable&&!this.noItems){var h=this.repeater.$element.find(`.${this.options.tableWrapperClass} .header-checkbox`).outerWidth(),c=a.grep(o,function(e){return"@_CHECKBOX_@"===e.property})[0];c.width=h}m.call(this,n)}},m=function(e){var t,i,s,n,o=[],r=this;if(this.options.columnSizing&&(t=0,n=0,e.find("th").each(function(){var e,i=a(this);if(void 0!==r.columns[t].width)e=r.columns[t].width,i.outerWidth(e),n+=i.outerWidth(),r.columns[t]._auto_width=e;else{var s=i.find(`.${r.options.headingClass}`).outerWidth();o.push({col:i,index:t,minWidth:s})}t++}),(i=o.length)>0)){var l=this.repeater.$canvas.find(`.${this.options.tableWrapperClass}`).outerWidth();for(s=Math.floor((l-n)/i),t=0;t<i;t++)o[t].minWidth>s&&(s=o[t].minWidth),o[t].col.outerWidth(s),this.columns[o[t].index]._auto_width=s}},f=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),i=e.indexOf("Firefox");return t>0?"ie-"+parseInt(e.substring(t+5,e.indexOf(".",t)),10):i>0?"firefox":""},g=function(){var e=`.${this.options.tableWrapperClass} > table .selected`,t=this.repeater.$element.find(".table-actions");"action"===this.options.selectable&&(e=`.${this.options.tableWrapperClass} > table tr`),this.repeater.$canvas.find(e).length>0?t.find("thead .btn").removeAttr("disabled"):t.find("thead .btn").attr("disabled","disabled")};return o.table={name:"table",ctor:l},l}),e("skylark-widgets-repeater/views/TileView",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","../views","./ViewBase"],function(e,t,i,s,n,a,o,r){var l=r.inherit({klassName:"TileView",options:{alignment:"left",infiniteScroll:!1,itemRendered:null,noItemsHTML:"no items found",selectable:!1,template:'<div class="clearfix repeater-tile" data-container="true" data-infinite="true" data-preserve="shallow"></div>',item:{template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}},clearSelectedItems:function(){this.repeater.$canvas.find(".repeater-tile .selectable.selected").removeClass("selected")},getSelectedItems:function(){var e=[];return this.repeater.$canvas.find(".repeater-tile .selectable.selected").each(function(){e.push(a(this))}),e},setSelectedItems:function(t,i){var s,n,o,r,l=this.options.selectable,h=this;function d(){if(r===t[s].index)return n=a(this),!1;r++}function c(){(n=a(this)).is(t[s].selector)&&p(n,t[s].selected)}function p(e,t){(t=void 0===t||t)?(i||"multi"===l||h.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}for(e.isArray(t)||(t=[t]),o=!0===i||"multi"===l?t.length:l&&t.length>0?1:0,s=0;s<o;s++)void 0!==t[s].index?(n=a(),r=0,this.repeater.$canvas.find(".repeater-tile .selectable").each(d),n.length>0&&p(n,t[s].selected)):t[s].selector&&this.repeater.$canvas.find(".repeater-tile .selectable").each(c)},selected:function(){var e,t=this.options.infiniteScroll;t&&(e="object"==typeof t?t:{},this.infiniteScrolling(!0,e))},before:function(e){var t,i=this.options.alignment,s=this.repeater.$canvas.find(".repeater-tile"),n=e.data,o={};return s.length<1?(s=a(this.options.template),i&&"none"!==i?(i={center:1,justify:1,left:1,right:1}[i]?i:"justify",s.addClass("align-"+i),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,o.item=s):o.action="none",n.items&&n.items.length<1?((t=a('<div class="empty"></div>')).append(this.options.noItemsHTML),s.append(t)):s.find(".empty:first").remove(),o},renderItem:function(e){var t=this.options.selectable,i=this,s=this._create$Item(this.options.item.template,e.subset[e.index]);return s.data("item_data",e.data.items[e.index]),t&&(s.addClass("selectable"),s.on("click",function(){i.isDisabled||(s.hasClass("selected")?(s.removeClass("selected"),i.repeater.$element.trigger("deselected.lark.repeaterThumbnail",s)):("multi"!==t&&i.repeater.$canvas.find(".repeater-tile .selectable.selected").each(function(){var e=a(this);e.removeClass("selected"),i.repeater.$element.trigger("deselected.lark.repeaterThumbnail",e)}),s.addClass("selected"),i.repeater.$element.trigger("selected.lark.repeaterThumbnail",s)))})),e.container.append(s),this.thumbnail_injectSpacers&&s.after('<span class="spacer">&nbsp;</span>'),this.options.itemRendered&&this.options.itemRendered({container:e.container,item:s,itemData:e.subset[e.index]},function(){}),!1}});return o.tile={name:"tile",ctor:l},l}),e("skylark-widgets-repeater/main",["./Repeater","./views","./views/ViewBase","./views/LinearView","./views/SliderView","./views/TableView","./views/TileView"],function(e){return e}),e("skylark-widgets-repeater",["skylark-widgets-repeater/main"],function(e){return e})}(i),!s){var o=require("skylark-langx-ns");n?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-repeater.js.map
