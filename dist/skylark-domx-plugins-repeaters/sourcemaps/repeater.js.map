{"version":3,"sources":["repeater.js"],"names":["define","skylark","langx","browser","eventer","noder","geom","elmx","$","fx","plugins","SelectList","ComboBox","InfiniteScroll","repeaters","Searchbox","viewTypeRegistry","Repeater","Plugin","inherit","klassName","pluginName","options","dataSource","callback","count","end","items","page","pages","start","defaultView","dropPagingCap","staticHeight","views","searchOnKeyPress","allowCancel","addons","throb","params","this","_elm","_construct","elm","overrided","currentView","self","$el","$canvas","find","$count","$end","$filters","$loader","$pageSize","$nextBtn","$pages","$prevBtn","$primaryPaging","$search","$secondaryPaging","$start","$viewport","$views","on","e","plugin","currentPage","isDisabled","infiniteScrollingCallback","infiniteScrollingCont","infiniteScrollingEnabled","infiniteScrollingEnd","infiniteScrollingOptions","lastPageInput","pageIncrement","resizeTimeout","stamp","Date","getTime","Math","floor","random","storedDataSourceOpts","syncingViewButtonState","viewType","value","trigger","render","clearInfinite","proxy","next","previous","evt","data","pageInputChange","text","val","keyCode","viewChanged","window","clearTimeout","setTimeout","resize","$btn","length","initViewTypes","changeView","clear","opts","preserve","scan","empty","undefined","_view","cleared","clearPreservedDataSourceOptions","destroy","markup","each","attr","outerHTML","scall","remove","off","disable","addClass","enabled","status","enable","removeClass","removeAttr","hasClass","parseInt","html","getDataOptions","dataSourceOptions","returnOptions","preserveDataSourceOptions","mixin","view","pageIndex","filter","searchValue","selectedItem","pageSize","search","dataOptions","infiniteScrolling","footer","viewport","css","height","outerHeight","hide","cont","infinitescroll","show","infiniteScrollPaging","NaN","initInfiniteScrolling","helpers","_views","viewTypes","isArray","setting","i","Error","ctor","push","isPlainObject","name","itemization","dataFromCombobox","pageInc","pagination","totalPages","currenPageOutput","dropMenu","l","append","is","focus","prevView","split","selected","syncViewButtonState","_throbber","className","viewTypeObj","dataSourceReturnedData","doRender","currentHiddenElement","headerHeight","footerHeight","bottomMargin","topMargin","scrubbedElements","previousProperties","$hiddenElements","parentsUntil","currentElementIndex","style","viewportMargins","bottom","top","staticHeightValue","width","outerWidth","forEach","element","$selected","target","parents","$itemToCheck","prop","getNestedProperty","obj","property","replace","str","singleQuoteProp","doubleQuoteProp","arrayIndex","dotProp","getDataProperty","dataset","key","_","b","toUpperCase","getAttribute","toLowerCase","test","parseJSON","ignore","getItemProperty","state","container","afterRender","callNextInit","currentViewType","nextViewType","initViewType","currentViewtype","initialize","call","renderOptions","keep","children","item","pres","detach","register"],"mappings":"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","file":"../repeater.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-fx\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"skylark-domx-plugins-popups/select-list\",\r\n  \"skylark-domx-plugins-popups/combobox\",\r\n  \"skylark-domx-plugins-scrolls/infinite-scroll\",\r\n  \"./repeaters\",\r\n  \"./searchbox\",\r\n  \"./view-type-registry\"\r\n],function(skylark,langx,browser,eventer,noder,geom,elmx,$,fx,plugins,SelectList,ComboBox,InfiniteScroll,repeaters,Searchbox,viewTypeRegistry){\r\n\r\n\t// REPEATER CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar Repeater = plugins.Plugin.inherit({\r\n\t\tklassName: \"Repeater\",\r\n\r\n\t\tpluginName: \"lark.repeaters.repeater\",\r\n\r\n\t\toptions : {\r\n\t\t\tdataSource: function dataSource (options, callback) {\r\n\t\t\t\tcallback({ count: 0, end: 0, items: [], page: 0, pages: 1, start: 0 });\r\n\t\t\t},\r\n\t\t\tdefaultView: -1, // should be a string value. -1 means it will grab the active view from the view controls\r\n\t\t\tdropPagingCap: 10,\r\n\t\t\tstaticHeight: -1, // normally true or false. -1 means it will look for data-staticheight on the element\r\n\t\t\tviews: null, // can be set to an object to configure multiple views of the same type,\r\n\t\t\tsearchOnKeyPress: false,\r\n\t\t\tallowCancel: true,\r\n\r\n\t\t\taddons : {\r\n\t\t\t\tviews : [\"table\",\"tile\"]\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t    throb: function(params) {\r\n\t      return fx.throb(this._elm,params);\r\n\t    },\r\n\r\n//\t\t_init : function(element,options) {\r\n\t    _construct : function(elm,options) {\r\n\t\t    this.overrided(elm,options);\r\n\t\t\tvar self = this;\r\n\t\t\tvar $btn;\r\n\t\t\tvar currentView;\r\n\r\n\t\t\tvar $el = this.$();\r\n\r\n\t\t\tthis.$canvas = $el.find('.repeater-canvas');\r\n\t\t\tthis.$count = $el.find('.repeater-count');\r\n\t\t\tthis.$end = $el.find('.repeater-end');\r\n\t\t\tthis.$filters = $el.find('.repeater-filters');\r\n\t\t\tthis.$loader = $el.find('.repeater-loader');\r\n\t\t\tthis.$pageSize = $el.find('.repeater-itemization .selectlist');\r\n\t\t\tthis.$nextBtn = $el.find('.repeater-next');\r\n\t\t\tthis.$pages = $el.find('.repeater-pages');\r\n\t\t\tthis.$prevBtn = $el.find('.repeater-prev');\r\n\t\t\tthis.$primaryPaging = $el.find('.repeater-primaryPaging');\r\n\t\t\tthis.$search = $el.find('.repeater-search').find('.search');\r\n\t\t\tthis.$secondaryPaging = $el.find('.repeater-secondaryPaging');\r\n\t\t\tthis.$start = $el.find('.repeater-start');\r\n\t\t\tthis.$viewport = $el.find('.repeater-viewport');\r\n\t\t\tthis.$views = $el.find('.repeater-views');\r\n\r\n\t\t\t$el.on('mousedown.bs.dropdown.data-api', '[data-toggle=\"dropdown\"]',function(e) {\r\n\t\t\t\t$(this).plugin(\"lark.popups.dropdown\");\r\n\t\t\t}); \r\n\r\n\t\t\tthis.currentPage = 0;\r\n\t\t\tthis.currentView = null;\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.infiniteScrollingCallback = function noop () {};\r\n\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\tthis.lastPageInput = 0;\r\n\t\t\t//this.options = langx.mixin({}, $.fn.repeater.defaults, options);\r\n\t\t\tthis.pageIncrement = 0;// store direction navigated\r\n\t\t\tthis.resizeTimeout = {};\r\n\t\t\tthis.stamp = new Date().getTime() + (Math.floor(Math.random() * 100) + 1);\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t\tthis.viewType = null;\r\n\r\n\t\t\tthis.$filters.plugin(\"lark.popups.selectlist\");\r\n\t\t\tthis.$pageSize.plugin(\"lark.popups.selectlist\");\r\n\t\t\tthis.$primaryPaging.find('.combobox').plugin(\"lark.popups.combobox\");\r\n\t\t\tthis.$search.plugin(\"lark.repeaters.searchbox\",{\r\n\t\t\t\tsearchOnKeyPress: this.options.searchOnKeyPress,\r\n\t\t\t\tallowCancel: this.options.allowCancel\r\n\t\t\t});\r\n\r\n\t\t\tthis.$filters.on('changed.lark.selectlist', function onFiltersChanged (e, value) {\r\n\t\t\t\tself.$().trigger('filtered', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$nextBtn.on('click.lark.repeater', langx.proxy(this.next, this));\r\n\t\t\tthis.$pageSize.on('changed.lark.selectlist', function onPageSizeChanged (e, value) {\r\n\t\t\t\tself.$().trigger('pageSizeChanged', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$prevBtn.on('click.lark.repeater', langx.proxy(this.previous, this));\r\n\t\t\tthis.$primaryPaging.find('.combobox').on('changed.lark.combobox', function onPrimaryPagingChanged (evt, data) {\r\n\t\t\t\tself.pageInputChange(data.text, data);\r\n\t\t\t});\r\n\t\t\tthis.$search.on('searched.lark.search cleared.lark.search', function onSearched (e, value) {\r\n\t\t\t\tself.$().trigger('searchChanged', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$search.on('canceled.lark.search', function onSearchCanceled (e, value) {\r\n\t\t\t\tself.$().trigger('canceled', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.$secondaryPaging.on('blur.lark.repeater', function onSecondaryPagingBlur () {\r\n\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t});\r\n\t\t\tthis.$secondaryPaging.on('keyup', function onSecondaryPagingKeyup (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$views.find('input').on('change.lark.repeater', langx.proxy(this.viewChanged, this));\r\n\r\n\t\t\t$(window).on('resize.lark.repeater.' + this.stamp, function onResizeRepeater () {\r\n\t\t\t\tclearTimeout(self.resizeTimeout);\r\n\t\t\t\tself.resizeTimeout = setTimeout(function resizeTimeout () {\r\n\t\t\t\t\tself.resize();\r\n\t\t\t\t\tself.$().trigger('resized');\r\n\t\t\t\t}, 75);\r\n\t\t\t});\r\n\r\n\t\t\t//this.$loader.loader();\r\n\t\t\t//this.$loader.loader('pause');\r\n\t\t\tif (this.options.defaultView !== -1) {\r\n\t\t\t\tcurrentView = this.options.defaultView;\r\n\t\t\t} else {\r\n\t\t\t\t$btn = this.$views.find('label.active input');\r\n\t\t\t\tcurrentView = ($btn.length > 0) ? $btn.val() : 'table';\r\n\t\t\t}\r\n\r\n\t\t\t//this.setViewOptions(currentView); // by lwf\r\n\r\n\t\t\tthis.initViewTypes(function initViewTypes () {\r\n\t\t\t\tself.resize();\r\n\t\t\t\tself.$().trigger('resized');\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tchangeView: currentView\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear: function clear (opts) {\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (!options.preserve) {\r\n\t\t\t\t// Just trash everything because preserve is false\r\n\t\t\t\tthis.$canvas.empty();\r\n\t\t\t} else if (!this.infiniteScrollingEnabled || options.clearInfinite) {\r\n\t\t\t\t// Preserve clear only if infiniteScrolling is disabled or if specifically told to do so\r\n\t\t\t\tscan(this.$canvas);\r\n\t\t\t} // Otherwise don't clear because infiniteScrolling is enabled\r\n\r\n\t\t\t// If viewChanged and current viewTypeObj has a cleared function, call it\r\n\t\t\tvar viewChanged = (options.viewChanged !== undefined) ? options.viewChanged : false;\r\n\t\t\t/* lwf\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tif (!viewChanged && viewTypeObj.cleared) {\r\n\t\t\t\tviewTypeObj.cleared.call(this, {\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.cleared({\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearPreservedDataSourceOptions: function clearPreservedDataSourceOptions () {\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t},\r\n\r\n\t\tdestroy: function destroy () {\r\n\t\t\tvar markup,\r\n\t\t\t\t$el = this.$();\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\t$el.find('input').each(function eachInput () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\tthis.$canvas.empty();\r\n\t\t\tmarkup = this._elm.outerHTML;\r\n\r\n\t\t\t// destroy components and remove leftover\r\n\t\t\tlangx.scall($el.find('.combobox').plugin(\"lark.popups.combobox\"),\"destroy\");\r\n\t\t\tlangx.scall($el.find('.selectlist').plugin(\"lark.popups.selectlist\"),\"destroy\");\r\n\t\t\tlangx.scall($el.find('.search').plugin(\"lark.repeaters.searchbox\"),\"destroy\");\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t$(this.infiniteScrollingCont).plugin(\"lark.scrolls.infinitescroll\",'destroy');\r\n\t\t\t}\r\n\r\n\t\t\t$el.remove();\r\n\r\n\t\t\t// any external events\r\n\t\t\t$(window).off('resize.lark.repeater.' + this.stamp);\r\n\r\n\t\t\treturn markup;\r\n\t\t},\r\n\r\n\t\tdisable: function disable () {\r\n\t\t\tlangx.scall(this.$search.plugin(\"lark.repeaters.searchbox\"),\"disable\");\r\n\t\t\tlangx.scall(this.$filters.plugin(\"lark.popups.selectlist\"),\"disable\");\r\n\t\t\tthis.$views.find('label, input').addClass('disabled').attr('disabled', 'disabled');\r\n\t\t\tlangx.scall(this.$pageSize.plugin(\"lark.popups.selectlist\"),\"disable\");\r\n\t\t\tlangx.scall(this.$primaryPaging.find('.combobox').plugin(\"lark.popups.combobox\"),\"disable\");\r\n\t\t\tthis.$secondaryPaging.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.enabled({\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = true;\r\n\t\t\tthis.$().addClass('disabled');\r\n\t\t\tthis.$().trigger('disabled');\r\n\t\t},\r\n\r\n\t\tenable: function enable () {\r\n\t\t\tlangx.scall(this.$search.plugin(\"lark.repeaters.searchbox\"),\"enable\");\r\n\t\t\tlangx.scall(this.$filters.plugin(\"lark.popups.selectlist\"),\"enable\")\r\n\t\t\tthis.$views.find('label, input').removeClass('disabled').removeAttr('disabled');\r\n\t\t\tlangx.scall(this.$pageSize.plugin(\"lark.popups.selectlist\"),\"enable\")\r\n\t\t\tlangx.scall(this.$primaryPaging.find('.combobox').plugin(\"lark.popups.combobox\"),\"enable\");\r\n\t\t\tthis.$secondaryPaging.removeAttr('disabled');\r\n\r\n\t\t\tif (!this.$prevBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\t\t\tif (!this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// is 0 or 1 pages, if using $primaryPaging (combobox)\r\n\t\t\t// if using selectlist allow user to use selectlist to select 0 or 1\r\n\t\t\tif (this.$prevBtn.hasClass('page-end') && this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tlangx.scall(this.$primaryPaging.plugin(\"lark.popups.combobox\"),\"disable\");\r\n\t\t\t}\r\n\r\n\t\t\t// if there are no items\r\n\t\t\tif (parseInt(this.$count.html(), 10) !== 0) {\r\n\t\t\t\tlangx.scall(this.$pageSize.plugin(\"lark.popups.selectlist\"),\"enable\");\r\n\t\t\t} else {\r\n\t\t\t\tlangx.scall(this.$pageSize.plugin(\"lark.popups.selectlist\"),\"disable\");\r\n\t\t\t}\r\n\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.enabled({\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.$().removeClass('disabled');\r\n\t\t\tthis.$().trigger('enabled');\r\n\t\t},\r\n\r\n\t\tgetDataOptions: function getDataOptions (opts) {\r\n\t\t\tvar options = opts || {};\r\n\t\t\tif (options.pageIncrement !== undefined) {\r\n\t\t\t\tif (options.pageIncrement === null) {\r\n\t\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPage += options.pageIncrement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataSourceOptions = {};\r\n\t\t\tif (options.dataSourceOptions) {\r\n\t\t\t\tdataSourceOptions = options.dataSourceOptions;\r\n\r\n\t\t\t\tif (options.preserveDataSourceOptions) {\r\n\t\t\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = dataSourceOptions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\tdataSourceOptions = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t}\r\n\r\n\t\t\tvar returnOptions = {\r\n\t\t\t\tview: this.currentView,\r\n\t\t\t\tpageIndex: this.currentPage,\r\n\t\t\t\tfilter: {\r\n\t\t\t\t\ttext: 'All',\r\n\t\t\t\t\tvalue: 'all'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (this.$filters.length > 0) {\r\n\t\t\t\treturnOptions.filter = this.$filters.plugin(\"lark.popups.selectlist\").selectedItem();\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled) {\r\n\t\t\t\treturnOptions.pageSize = 25;\r\n\r\n\t\t\t\tif (this.$pageSize.length > 0) {\r\n\t\t\t\t\treturnOptions.pageSize = parseInt(this.$pageSize.plugin(\"lark.popups.selectlist\").selectedItem().value, 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar searchValue = this.$search && this.$search.find('input') && this.$search.find('input').val();\r\n\t\t\tif (searchValue !== '') {\r\n\t\t\t\treturnOptions.search = searchValue;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (this._view) {\r\n\t\t\t\treturnOptions = this._view.dataOptions(returnOptions);\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturnOptions = langx.mixin(returnOptions, dataSourceOptions);\r\n\r\n\t\t\treturn returnOptions;\r\n\t\t},\r\n\r\n\t\tinfiniteScrolling: function infiniteScrolling (enable, opts) {\r\n\t\t\tvar footer = this.$().find('.repeater-footer');\r\n\t\t\tvar viewport = this.$().find('.repeater-viewport');\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (enable) {\r\n\t\t\t\tthis.infiniteScrollingEnabled = true;\r\n\t\t\t\tthis.infiniteScrollingEnd = options.end;\r\n\t\t\t\tdelete options.dataSource;\r\n\t\t\t\tdelete options.end;\r\n\t\t\t\tthis.infiniteScrollingOptions = options;\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() + footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.hide();\r\n\t\t\t} else {\r\n\t\t\t\tvar cont = this.infiniteScrollingCont;\r\n\t\t\t\tvar data = cont.data();\r\n\t\t\t\tdelete data.infinitescroll;\r\n\t\t\t\tcont.off('scroll');\r\n\t\t\t\tcont.removeClass('infinitescroll');\r\n\r\n\t\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() - footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.show();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinfiniteScrollPaging: function infiniteScrollPaging (data) {\r\n\t\t\tvar end = (this.infiniteScrollingEnd !== true) ? this.infiniteScrollingEnd : undefined;\r\n\t\t\tvar page = data.page;\r\n\t\t\tvar pages = data.pages;\r\n\r\n\t\t\tthis.currentPage = (page !== undefined) ? page : NaN;\r\n\r\n\t\t\tif (data.end === true || (this.currentPage + 1) >= pages) {\r\n\t\t\t\tvar plugin = this.infiniteScrollingCont.plugin(\"lark.scrolls.infinitescroll\",\"instance\");\r\n\t\t\t\tif (plugin) {\r\n\t\t\t\t\tplugin.end(end);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitInfiniteScrolling: function initInfiniteScrolling () {\r\n\t\t\tvar cont = this.$canvas.find('[data-infinite=\"true\"]:first');\r\n\r\n\t\t\tcont = (cont.length < 1) ? this.$canvas : cont;\r\n\t\t\tif (cont.data('lark.scrolls.infinitescroll')) {\r\n\t\t\t\tcont.plugin(\"lark.scrolls.infinitescroll\",'enable');\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar opts = langx.mixin({}, this.infiniteScrollingOptions);\r\n\t\t\t\topts.dataSource = function dataSource (helpers, callback) {\r\n\t\t\t\t\tself.infiniteScrollingCallback = callback;\r\n\t\t\t\t\tself.render({\r\n\t\t\t\t\t\tpageIncrement: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tcont.plugin(\"lark.scrolls.infinitescroll\",opts);\r\n\t\t\t\tthis.infiniteScrollingCont = cont;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitViewTypes: function initViewTypes (callback) {\r\n\r\n\t\t\tvar views = this._views = [];\r\n\t\t\tvar viewTypes = this.options.addons.views;\r\n\t\t\tif (langx.isArray(viewTypes)) {\r\n\t\t\t\tfor (var i = 0; i< viewTypes.length; i++) {\r\n\t\t\t\t\tvar setting = viewTypeRegistry[viewTypes[i]];\r\n\t\t\t\t\tif (!setting) {\r\n\t\t\t\t\t\tthrow new Error(\"The view type \" + viewTypes[i] + \" is not defined!\");\r\n\t\t\t\t\t} \r\n\t\t\t\t\tvar ctor = setting.ctor;\r\n\t\t\t\t\tthis._views.push(this._views[viewTypes[i]] = new ctor(this));\r\n\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t} else if (langx.isPlainObject(viewTypes)) {\r\n\t\t\t\tfor (var name in viewTypes) {\r\n\t\t\t\t\tvar setting = viewTypeRegistry[name];\r\n\t\t\t\t\tif (!setting) {\r\n\t\t\t\t\t\tthrow new Error(\"The view type \" + viewTypes[i] + \" is not defined!\");\r\n\t\t\t\t\t} \r\n\t\t\t\t\tvar ctor = setting.ctor;\r\n\t\t\t\t\tthis._views.push(this._views[name] = new ctor(this,viewTypes[name]));\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcallback();\t\t\t\r\n\t\t},\r\n\r\n\t\titemization: function itemization (data) {\r\n\t\t\tthis.$count.html((data.count !== undefined) ? data.count : '?');\r\n\t\t\tthis.$end.html((data.end !== undefined) ? data.end : '?');\r\n\t\t\tthis.$start.html((data.start !== undefined) ? data.start : '?');\r\n\t\t},\r\n\r\n\t\tnext: function next () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = 1;\r\n\t\t\tthis.$().trigger('nextClicked');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tpageInputChange: function pageInputChange (val, dataFromCombobox) {\r\n\t\t\t// dataFromCombobox is a proxy for data from combobox's changed event,\r\n\t\t\t// if no combobox is present data will be undefined\r\n\t\t\tvar pageInc;\r\n\t\t\tif (val !== this.lastPageInput) {\r\n\t\t\t\tthis.lastPageInput = val;\r\n\t\t\t\tvar value = parseInt(val, 10) - 1;\r\n\t\t\t\tpageInc = value - this.currentPage;\r\n\t\t\t\tthis.$().trigger('pageChanged', [value, dataFromCombobox]);\r\n\t\t\t\tthis.render({\r\n\t\t\t\t\tpageIncrement: pageInc\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpagination: function pagination (data) {\r\n\t\t\tthis.$primaryPaging.removeClass('active');\r\n\t\t\tthis.$secondaryPaging.removeClass('active');\r\n\r\n\t\t\tvar totalPages = data.pages;\r\n\t\t\tthis.currentPage = (data.page !== undefined) ? data.page : NaN;\r\n\t\t\t// set paging to 0 if total pages is 0, otherwise use one-based index\r\n\t\t\tvar currenPageOutput = totalPages === 0 ? 0 : this.currentPage + 1;\r\n\r\n\t\t\tif (totalPages <= this.options.dropPagingCap) {\r\n\t\t\t\tthis.$primaryPaging.addClass('active');\r\n\t\t\t\tvar dropMenu = this.$primaryPaging.find('.dropdown-menu');\r\n\t\t\t\tdropMenu.empty();\r\n\t\t\t\tfor (var i = 0; i < totalPages; i++) {\r\n\t\t\t\t\tvar l = i + 1;\r\n\t\t\t\t\tdropMenu.append('<li data-value=\"' + l + '\"><a href=\"#\">' + l + '</a></li>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$primaryPaging.find('input.form-control').val(currenPageOutput);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$secondaryPaging.addClass('active');\r\n\t\t\t\tthis.$secondaryPaging.val(currenPageOutput);\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastPageInput = this.currentPage + 1 + '';\r\n\r\n\t\t\tthis.$pages.html('' + totalPages);\r\n\r\n\t\t\t// this is not the last page\r\n\t\t\tif ((this.currentPage + 1) < totalPages) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$nextBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$nextBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// this is not the first page\r\n\t\t\tif ((this.currentPage - 1) >= 0) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$prevBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$prevBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// return focus to next/previous buttons after navigating\r\n\t\t\tif (this.pageIncrement !== 0) {\r\n\t\t\t\tif (this.pageIncrement > 0) {\r\n\t\t\t\t\tif (this.$nextBtn.is(':disabled')) {\r\n\t\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.$prevBtn.is(':disabled')) {\r\n\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprevious: function previous () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = -1;\r\n\t\t\tthis.$().trigger('previousClicked');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// This functions more as a \"pre-render\" than a true \"render\"\r\n\t\trender: function render (opts) {\r\n\t\t\tthis.disable();\r\n\r\n\t\t\tvar viewChanged = false;\r\n\t\t\t//var viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (options.changeView && (this.currentView !== options.changeView)) {\r\n\t\t\t\tvar prevView = this.currentView;\r\n\t\t\t\tthis.currentView = options.changeView;\r\n\t\t\t\tthis.viewType = this.currentView.split('.')[0];\r\n\r\n\t\t\t\tthis._view = this._views[this.viewType];\r\n\r\n\t\t\t\t//this.setViewOptions(this.currentView);\r\n\r\n\t\t\t\tthis.$().attr('data-currentview', this.currentView);\r\n\t\t\t\tthis.$().attr('data-viewtype', this.viewType);\r\n\t\t\t\tviewChanged = true;\r\n\t\t\t\toptions.viewChanged = viewChanged;\r\n\r\n\t\t\t\tthis.$().trigger('viewChanged', this.currentView);\r\n\r\n\t\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t\tthis.infiniteScrolling(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._view.selected({\r\n\t\t\t\t\tprevView: prevView\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.syncViewButtonState();\r\n\r\n\t\t\toptions.preserve = (options.preserve !== undefined) ? options.preserve : !viewChanged;\r\n\t\t\tthis.clear(options);\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled || (this.infiniteScrollingEnabled && viewChanged)) {\r\n\t\t\t\t//this.$loader.show().loader('play');\r\n\t\t\t\tthis._throbber = this.throb({\r\n\t\t\t\t\tclassName : \"throbWrap\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar dataOptions = this.getDataOptions(options);\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar viewTypeObj = this._view;\r\n\t\t\tthis.options.dataSource(\r\n\t\t\t\tdataOptions,\r\n\t\t\t\t// this serves as a bridge function to pass all required data through to the actual function\r\n\t\t\t\t// that does the rendering for us.\r\n\t\t\t\tfunction callDoRender (dataSourceReturnedData) {\r\n\t\t\t\t\tself.doRender({\r\n\t\t\t\t\t\tdata: dataSourceReturnedData,\r\n\t\t\t\t\t\tdataOptions: dataOptions,\r\n\t\t\t\t\t\toptions: options,\r\n\t\t\t\t\t\tviewChanged: viewChanged,\r\n\t\t\t\t\t\tviewTypeObj: viewTypeObj\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tresize: function resize () {\r\n\t\t\tvar staticHeight = (this.options.staticHeight === -1) ? this.$().attr('data-staticheight') : this.options.staticHeight;\r\n\t\t\tvar viewTypeObj = {};\r\n\t\t\tvar height;\r\n\t\t\tvar viewportMargins;\r\n\t\t\tvar scrubbedElements = [];\r\n\t\t\tvar previousProperties = [];\r\n\t\t\t//var $hiddenElements = this.$().parentsUntil(':visible').addBack(); // del addBack() not supported by skyalrk\r\n\t\t\tvar $hiddenElements = this.$().parentsUntil(':visible');\r\n\t\t\tvar currentHiddenElement;\r\n\t\t\tvar currentElementIndex = 0;\r\n\r\n\t\t\t// Set parents to 'display:block' until repeater is visible again\r\n\t\t\twhile (currentElementIndex < $hiddenElements.length && this.$().is(':hidden')) {\r\n\t\t\t\tcurrentHiddenElement = $hiddenElements[currentElementIndex];\r\n\t\t\t\t// Only set display property on elements that are explicitly hidden (i.e. do not inherit it from their parent)\r\n\t\t\t\tif ($(currentHiddenElement).is(':hidden')) {\r\n\t\t\t\t\tpreviousProperties.push(currentHiddenElement.style['display']);\r\n\t\t\t\t\tcurrentHiddenElement.style['display'] = 'block';\r\n\t\t\t\t\tscrubbedElements.push(currentHiddenElement);\r\n\t\t\t\t}\r\n\t\t\t\tcurrentElementIndex++;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (staticHeight !== undefined && staticHeight !== false && staticHeight !== 'false') {\r\n\t\t\t\tthis.$canvas.addClass('scrolling');\r\n\t\t\t\tviewportMargins = {\r\n\t\t\t\t\tbottom: this.$viewport.css('margin-bottom'),\r\n\t\t\t\t\ttop: this.$viewport.css('margin-top')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar staticHeightValue = (staticHeight === 'true' || staticHeight === true) ? this.$().height() : parseInt(staticHeight, 10);\r\n\t\t\t\tvar headerHeight = this.$().find('.repeater-header').outerHeight();\r\n\t\t\t\tvar footerHeight = this.$().find('.repeater-footer').outerHeight();\r\n\t\t\t\tvar bottomMargin = (viewportMargins.bottom === 'auto') ? 0 : parseInt(viewportMargins.bottom, 10);\r\n\t\t\t\tvar topMargin = (viewportMargins.top === 'auto') ? 0 : parseInt(viewportMargins.top, 10);\r\n\r\n\t\t\t\theight = staticHeightValue - headerHeight - footerHeight - bottomMargin - topMargin;\r\n\t\t\t\tthis.$viewport.outerHeight(height);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$canvas.removeClass('scrolling');\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.resize({\r\n\t\t\t\t\theight: this.$().outerHeight(),\r\n\t\t\t\t\twidth: this.$().outerWidth()\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tscrubbedElements.forEach(function (element, i) {\r\n\t\t\t\telement.style['display'] = previousProperties[i];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tviewChanged: function viewChanged (e) {\r\n\t\t\tvar $selected = $(e.target);\r\n\t\t\tvar val = $selected.val();\r\n\r\n\t\t\tif (!this.syncingViewButtonState) {\r\n\t\t\t\tif (this.isDisabled || $selected.parents('label:first').hasClass('disabled')) {\r\n\t\t\t\t\tthis.syncViewButtonState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render({\r\n\t\t\t\t\t\tchangeView: val,\r\n\t\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsyncViewButtonState: function syncViewButtonState () {\r\n\t\t\tvar $itemToCheck = this.$views.find('input[value=\"' + this.currentView + '\"]');\r\n\r\n\t\t\tthis.syncingViewButtonState = true;\r\n\t\t\tthis.$views.find('input').prop('checked', false);\r\n\t\t\tthis.$views.find('label.active').removeClass('active');\r\n\r\n\t\t\tif ($itemToCheck.length > 0) {\r\n\t\t\t\t$itemToCheck.prop('checked', true);\r\n\t\t\t\t$itemToCheck.parents('label:first').addClass('active');\r\n\t\t\t}\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t},\r\n\r\n\t\tgetNestedProperty: function (obj, property) {\r\n\t\t\tproperty.replace(\r\n\t\t\t\t// Matches native JavaScript notation in a String,\r\n\t\t\t\t// e.g. '[\"doubleQuoteProp\"].dotProp[2]'\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\t/\\[(?:'([^']+)'|\"([^\"]+)\"|(\\d+))\\]|(?:(?:^|\\.)([^\\.\\[]+))/g,\r\n\t\t\t\tfunction (str, singleQuoteProp, doubleQuoteProp, arrayIndex, dotProp) {\r\n\t\t\t\t\tvar prop =\r\n\t\t\t\t\t\tdotProp ||\r\n\t\t\t\t\t\tsingleQuoteProp ||\r\n\t\t\t\t\t\tdoubleQuoteProp ||\r\n\t\t\t\t\t\t(arrayIndex && parseInt(arrayIndex, 10))\r\n\t\t\t\t\tif (str && obj) {\r\n\t\t\t\t\t\tobj = obj[prop]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tgetDataProperty: function (obj, property) {\r\n\t\t\tvar key\r\n\t\t\tvar prop\r\n\t\t\tif (obj.dataset) {\r\n\t\t\t\tkey = property.replace(/-([a-z])/g, function (_, b) {\r\n\t\t\t\t\treturn b.toUpperCase()\r\n\t\t\t\t})\r\n\t\t\t\tprop = obj.dataset[key]\r\n\t\t\t} else if (obj.getAttribute) {\r\n\t\t\t\tprop = obj.getAttribute(\r\n\t\t\t\t\t'data-' + property.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (typeof prop === 'string') {\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\tif (\r\n\t\t\t\t\t/^(true|false|null|-?\\d+(\\.\\d+)?|\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/.test(prop)\r\n\t\t\t\t) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn $.parseJSON(prop)\r\n\t\t\t\t\t} catch (ignore) {}\r\n\t\t\t\t}\r\n\t\t\t\treturn prop\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemProperty: function (obj, property) {\r\n\t\t\tvar prop = this.getDataProperty(obj, property)\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = obj[property]\r\n\t\t\t}\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = this.getNestedProperty(obj, property)\r\n\t\t\t}\r\n\t\t\treturn prop\r\n\t\t},\r\n\r\n\t\t// This does the actual rendering of the repeater\r\n\t\tdoRender : function doRender (state) {\r\n\t\t\tvar data = state.data || {};\r\n\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t// pass empty object because data handled in infiniteScrollPaging method\r\n\t\t\t\tthis.infiniteScrollingCallback({});\r\n\t\t\t} else {\r\n\t\t\t\tthis.itemization(data);\r\n\t\t\t\tthis.pagination(data);\r\n\t\t\t}\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tstate.viewTypeObj.render({\r\n\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\tdata: data\r\n\t\t\t});\r\n\r\n\t\t\tthis.afterRender(state);\r\n\t\t},\r\n\r\n\t\tcallNextInit : function callNextInit (currentViewType, viewTypes, callback) {\r\n\t\t\tvar nextViewType = currentViewType + 1;\r\n\t\t\tif (nextViewType < viewTypes.length) {\r\n\t\t\t\tthis.initViewType(nextViewType, viewTypes, callback);\r\n\t\t\t} else {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitViewType : function initViewType (currentViewtype, viewTypes, callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (viewTypes[currentViewtype].initialize) {\r\n\t\t\t\tviewTypes[currentViewtype].initialize.call(this, {}, function afterInitialize () {\r\n\t\t\t\t\tself.callNextInit(currentViewtype, viewTypes, callback);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tself.callNextInit(currentViewtype, viewTypes, callback);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Does all of our cleanup post-render\r\n\t\tafterRender : function afterRender (state) {\r\n\t\t\tvar data = state.data || {};\r\n\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\tif (state.viewChanged || state.options.clearInfinite) {\r\n\t\t\t\t\tthis.initInfiniteScrolling();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.infiniteScrollPaging(data, state.options);\r\n\t\t\t}\r\n\r\n\t\t\t//this.$loader.hide().loader('pause');\r\n\t\t\tif (this._throbber) {\r\n\t\t\t\tthis._throbber.remove();\r\n\t\t\t\tthis._throbber = null;\r\n\t\t\t}\r\n\t\t\tthis.enable();\r\n\r\n\t\t\tthis.$search.trigger('rendered', {\r\n\t\t\t\tdata: data,\r\n\t\t\t\toptions: state.dataOptions,\r\n\t\t\t\trenderOptions: state.options\r\n\t\t\t});\r\n\t\t\tthis.$().trigger('rendered', {\r\n\t\t\t\tdata: data,\r\n\t\t\t\toptions: state.dataOptions,\r\n\t\t\t\trenderOptions: state.options\r\n\t\t\t});\r\n\r\n\t\t\t// for maintaining support of 'loaded' event\r\n\t\t\tthis.$().trigger('loaded', state.dataOptions);\r\n\t\t}\r\n\t});\r\n\r\n\tvar logWarn = function logWarn (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t};\r\n\r\n\tvar scan = function scan (cont) {\r\n\t\tvar keep = [];\r\n\t\tcont.children().each(function eachContainerChild () {\r\n\t\t\tvar item = $(this);\r\n\t\t\tvar pres = item.attr('data-preserve');\r\n\t\t\tif (pres === 'deep') {\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t} else if (pres === 'shallow') {\r\n\t\t\t\tscan(item);\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tcont.empty();\r\n\t\tcont.append(keep);\r\n\t};\r\n\r\n\tRepeater.addons = {};\r\n\r\n    plugins.register(Repeater);\r\n\r\n\r\n\treturn repeaters.Repeater = Repeater;\r\n\r\n});\r\n"]}